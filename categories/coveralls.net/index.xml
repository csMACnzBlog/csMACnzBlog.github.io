<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>coveralls.net on csMACnz&#39;s Blog</title>
    <link>https://csmacnzblog.github.io/categories/coveralls.net/</link>
    <description>Recent content in coveralls.net on csMACnz&#39;s Blog</description>
    <image>
      <url>https://csmacnzblog.github.io/favicon.png</url>
      <title>csMACnz&#39;s Blog</title>
      <link>https://csmacnzblog.github.io</link>
    </image>
    <ttl>1440</ttl>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-nz</language>
    <lastBuildDate>Mon, 04 Jun 2018 07:00:00 +0000</lastBuildDate><atom:link href="https://csmacnzblog.github.io/categories/coveralls.net/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Coveralls.Net 1.0.0 Release</title>
      <link>https://csmacnzblog.github.io/post/coveralls-net-1-0-0-release/</link>
      <pubDate>Mon, 04 Jun 2018 07:00:00 +0000</pubDate>
      
      <guid>https://csmacnzblog.github.io/post/coveralls-net-1-0-0-release/</guid>
      <description><p>Christmas 2014. I was building out projects on GitHub in open source. The obsession with open source even went on to spawn a <a href="https://blog.csmac.nz/-net-os-1-source-control/">Series of Blog Posts</a>. Each tool or library I was building lead onto another tool or library to make the build pipeline, or development process better. Often putting down one project while I sorted out another one first.  This has continued at a slow pace for the last 3 years.</p>
<p>Back in January 2015 I <a href="https://blog.csmac.nz/introducing-coveralls-net/">Announced Coveralls.Net</a>. This is a code coverage publisher for publishing your coverage results to the coveralls.io API. Coveralls.io is a coverage tracking service, which is free for open source projects, with a paid service for private use, and now an Enterprise version as well. There was a bunch of python and ruby versions, but I wanted fewer dependencies on those runtimes so built my own.  I even managed to get it listed as one of the two <a href="https://docs.coveralls.io/dot-net">recommended .Net coverage integrations</a> on the coveralls.io docs.</p>
<p>While development has been a slow work of labour over the last three years, the announcement of dotnet CLI tools (proper npm-style tools, not the weird interim dotnet-tool stuff&hellip;) with dotnet SDK 2.1, I had to jump in and get on board.</p>
<h3 id="announcing-100">Announcing 1.0.0</h3>
<p>Which brings me to announcing Coveralls.Net 1.0.0. This is a dotnet CLI tools compatible version of <code>csmacnz.Coveralls</code>. Easier to install. Easier to update. And a whole bunch new features, including more coverage options, and better autodetection processes in AppVeyor.</p>
<pre><code># install globally
dotnet tool install -g coveralls.net --version 1.0.0

# if installed globally, this should just be available on your path
csmacnz.coveralls &lt;args&gt;

# install into a local folder
dotnet tool install coveralls.net --version 1.0.0 --tools-path tools

# if installed into a tools path, you can run it from there.
.\tools\csmacnz.Coveralls &lt;args&gt;
</code></pre>
<p>Now, I&rsquo;ve been struggling a bit with beta 0.8.0. It hasn&rsquo;t been easy to find time to test the new stuff I added, get others to test, and be happy to call it a stable release. But there was a bunch of new stuff and fixes in there. These have all rolled forward into the 1.0.0 Release now. (I might go back and call 0.8.0 stable now since it still works the old way. But for now the old way still works with stable <code>0.7.0</code> and <code>0.8.0-beta003</code>.)</p>
<p>Still not happy/comfortable with using CLI tools? Not using 2.1? That&rsquo;s ok. I&rsquo;ve used the power of the <a href="https://blog.csmac.nz/dotnetcore2-self-contained-applications/">self-contained app</a> to provide a <code>windows</code>, <code>linux</code> and <code>osx</code> native version (Linux targets the cross-compat Linux target) in a zip file under <a href="https://github.com/csMACnz/coveralls.net/releases/tag/1.0.0">the Releases folder on GitHub</a>.</p>
<p>For windows in PowerShell you would use it something like this:</p>
<pre><code># The TLS change was necessary on my development machine
[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12

$zipDownloadPath=&quot;https://github.com/csMACnz/coveralls.net/releases/download/1.0.0/coveralls.net.1.0.0-windows.zip&quot;
Invoke-WebRequest -UseBasicParsing $zipDownloadPath -OutFile coveralls-windows.zip
mkdir coveralls-windows
Expand-Archive .\coveralls-windows.zip coveralls-windows

.\coveralls-windows\csmacnz.Coveralls.exe
</code></pre>
<p>I hope to get more details added on the GitHub Wiki for linux and mac usage of the self-contained app, as well as updating all the samples over at <a href="https://github.com/csMACnz/Coveralls.net-Samples/">Coveralls.net-Samples</a>.</p>
<h3 id="more-targets">More targets</h3>
<p>Since the first release, targeting OpenCover coverage files (the most popular at the time), this has been expanded to include Visual Studio Coverage, monocov, Report Generator, Chutzpah javascript coverage, lcov, NCover and <a href="https://github.com/tonerdo/coverlet">Coverlet</a> cross-platform .Net coverage (via its opencover file format).</p>
<h3 id="whats-next">What&rsquo;s Next?</h3>
<p>I&rsquo;ve already started working on 1.1.0 while the dotnet 2.1 tools have been working towards stable.</p>
<ul>
<li>Better autodetection functionality (including Travis and TeamCity)</li>
<li>dotcover support</li>
<li>parallel build support</li>
<li>add native coverlet support</li>
<li>Bug fixes that didn&rsquo;t make it to 1.0.0</li>
<li>Complete and test Enterprise support</li>
</ul>
<p>Hopefully, it won&rsquo;t be soon before long that you will see an Announcing 1.1.0 Post.</p>
<p>Interested in following progress on this? I have a twitter account <a href="https://twitter.com/coverallsdotnet">@coverallsdotnet</a> That I am trying to be more proactive with.  You can also track progress on the <a href="https://github.com/csMACnz/coveralls.net">GitHub Project</a>.  Contributions welcome, though I hear I&rsquo;m a bit of a stickler for quality and such. C&rsquo;est la vie.</p>
<p>The irony of a coverage publishing tool only having 42% coverage wasn&rsquo;t lost on me, so I got it up to 74%. Soon enough I should get that to 100%. Probably just in time for a version 2.0.0.</p>
<h3 id="need-more">Need more?</h3>
<p>Issues, feature requests or feedback? Just write up an issue on GitHub. I would love to hear your experience of using the tool, and I would love to expand the supported coverage formats to include your favourite tool.</p>
<p>Thanks for using it! It makes me more inclined to make it awesome.</p>
</description>
    </item>
    
    <item>
      <title>monocov &#43; Travis-CI = WINNING</title>
      <link>https://csmacnzblog.github.io/post/monocov-travis-ci-winning/</link>
      <pubDate>Sun, 08 Feb 2015 15:29:13 +0000</pubDate>
      
      <guid>https://csmacnzblog.github.io/post/monocov-travis-ci-winning/</guid>
      <description><p>After much frustration, I now have <a href="https://github.com/mono/monocov">monocov</a> running on my Travis-CI build, and I&rsquo;m going to share with you how I did it.</p>
<p>TL;DR
The coverage results don&rsquo;t seem accurate just yet, but jump to the end to see the full script to get it going on your build.</p>
<p>As I mentioned in a <a href="http://blog.csmac.nz/introducing-coveralls-net">previous post</a>, I am building a <a href="https://coveralls.io">coveralls.io</a> publisher for .Net code coverage.  This means (to me any way) that I need to support mono coverage as well.  The best suggested coverage tool <a href="http://www.mono-project.com/docs/debug+profile/profile/code-coverage/">mentioned online</a> for mono is monocov, despite being officially unmaintained since May 2011.  But I stuck with it.</p>
<p>So I started building a <a href="https://github.com/csMACnz/Coveralls.net-Samples">sample library</a> with CI on github and very easily got examples working for AppVeyor on windows.  But I wanted to get monocov working as a sample with Travis-CI before I built support for it.  I found pretty quickly that monocov is not installed on Travis-ci, and in fact there is no package available to install it either that I could find.</p>
<p>Thanks to github forks, I found someone else had forked and updated the source for monocov to work with a newer Xamarin version of the mono installation.  So naturally I forked this fork so I could make my own changes if necessary.</p>
<p>Using a few tricks I was able to get my Travis-CI build to clone down the git fork, build it and install it on the build server.  I did have to change a compile setting and set a variable based on <a href="http://keithnordstrom.com/getting-the-monocov-profiler-to-link-on-ubuntu-13">this blog post</a>, and I had to pull down the <a href="https://www.nuget.org/packages/Mono.Cecil/">mono.cecil nuget package</a> so I had the Mono.Cecil.dll file required by the C# side of monocov. I also made to install gtk-sharp2 for the GUI library to build with make, although I don&rsquo;t use it. After all these steps I finally got it to a point where it was installed.  The Travis-CI code ended up using these instructions in the install section:</p>
<pre><code class="language-yaml">- sudo apt-get install gtk-sharp2
- curl -sS https://api.nuget.org/packages/mono.cecil.0.9.5.4.nupkg &gt; /tmp/mono.cecil.0.9.5.4.nupkg.zip
- unzip /tmp/mono.cecil.0.9.5.4.nupkg.zip -d /tmp/cecil
- cp /tmp/cecil/lib/net40/Mono.Cecil.dll .
- cp /tmp/cecil/lib/net40/Mono.Cecil.dll /tmp/cecil/
- git clone --depth=50 git://github.com/csMACnz/monocov.git ../../csMACnz/monocov
- cd ../../csMACnz/monocov
- cp /tmp/cecil/Mono.Cecil.dll .
- ./configure
- make
- sudo make install
- cd ../../csMACnz/Coveralls.net-Samples 
</code></pre>
<p>Note I changed directories a few times, and pulled monocov into a directory beside my actual repo build folder.</p>
<p>To get it to run over my tests, I had to use a couple of options:</p>
<ul>
<li>set the load library path as seen in the <a href="http://keithnordstrom.com/getting-the-monocov-profiler-to-link-on-ubuntu-13">blog post</a> I mentioned earlier.</li>
<li>&ndash;profile=monocov:outfile=monocovCoverage.cov to get monocov to run and output to a specified file</li>
<li>,+[GameOfLife],+[GameOfLife.xUnit.Tests] as part of the coverage to specify which assemblies to record coverage for</li>
<li>/noshadow so it didn&rsquo;t use a temp directory for the results, since it has to locate the dll in step 2</li>
<li>run a second step afterwards to convert the *.cov file into a folder of detailed xml files</li>
</ul>
<p>The resulting code for this looked like this:</p>
<pre><code class="language-yaml">- export LD_LIBRARY_PATH=/usr/local/lib
- mono --debug --profile=monocov:outfile=monocovCoverage.cov,+[GameOfLife],+[GameOfLife.xUnit.Tests] ./src/packages/xunit.runners.1.9.2/tools/xunit.console.clr4.exe ./src/GameOfLife.xUnit.Tests/bin/Release/GameOfLife.xUnit.Tests.dll  /noshadow
- monocov --export-xml=monocovCoverage monocovCoverage.cov
</code></pre>
<p>So whats the next steps? Well now I have actual results I will get <a href="https://github.com/csMACnz/coveralls.net">coveralls.net</a> support written and get it published to nuget and usable on my Travis-CI build, so it is passing.  After that I will look at the accuracy of the existing code, since my initial results haven&rsquo;t really looked that accurate.</p>
<p>In summary, and If you just skipped to the end, my full <code>travis.yml</code> file running monocov over my .net project on Travis-CI looks like this:</p>
<pre><code class="language-yaml">language: csharp
solution: ./src/GameOfLife.sln
install:
  - nuget restore ./src/GameOfLife.sln
  - chmod +x ./src/packages/xunit.runners.1.9.2/tools/xunit.console.clr4.exe
  - sudo apt-get install nunit-console
  - sudo apt-get install gtk-sharp2
  - curl -sS https://api.nuget.org/packages/mono.cecil.0.9.5.4.nupkg &gt; /tmp/mono.cecil.0.9.5.4.nupkg.zip
  - unzip /tmp/mono.cecil.0.9.5.4.nupkg.zip -d /tmp/cecil
  - cp /tmp/cecil/lib/net40/Mono.Cecil.dll .
  - cp /tmp/cecil/lib/net40/Mono.Cecil.dll /tmp/cecil/
  - git clone --depth=50 git://github.com/csMACnz/monocov.git ../../csMACnz/monocov
  - cd ../../csMACnz/monocov
  - cp /tmp/cecil/Mono.Cecil.dll .
  - ./configure
  - make
  - sudo make install
  - cd ../../csMACnz/Coveralls.net-Samples
script:
  - xbuild /p:Configuration=Release ./src/GameOfLife.sln
  - export LD_LIBRARY_PATH=/usr/local/lib
  - mono --debug --profile=monocov:outfile=monocovCoverage.cov,+[GameOfLife],+[GameOfLife.xUnit.Tests] ./src/packages/xunit.runners.1.9.2/tools/xunit.console.clr4.exe ./src/GameOfLife.xUnit.Tests/bin/Release/GameOfLife.xUnit.Tests.dll  /noshadow
  - monocov --export-xml=monocovCoverage monocovCoverage.cov
</code></pre>
<p>Hope someone finds this useful, and stay tuned for the coveralls.io update.</p>
</description>
    </item>
    
    <item>
      <title>Introducing Coveralls.net</title>
      <link>https://csmacnzblog.github.io/post/introducing-coveralls-net/</link>
      <pubDate>Sat, 24 Jan 2015 14:33:48 +0000</pubDate>
      
      <guid>https://csmacnzblog.github.io/post/introducing-coveralls-net/</guid>
      <description><p>So I&rsquo;ve built an (almost MVP) code coverage publisher for <a href="http://coveralls.io">coveralls.io</a> from C# code, using opencover coverage results.  Checkout the <a href="https://github.com/csmacnz/coveralls.net">github repo</a> and <a href="https://www.nuget.org/packages/coveralls.net/">nuget packages</a> if you want to use it.  I&rsquo;m even dogfooding it on appveyor as part of my <a href="https://github.com/csmacnz/coveralls.net/blob/master/build.tasks.ps1#L81">psake build tasks</a>.</p>
<p>So how do you use it?  Well luckily I used <a href="https://github.com/docopt/docopt.net">docopts.net</a> to give you a bit of a command line experience while you use it, but the gist is this:</p>
<pre><code class="language-powershell">csmacnz.Coveralls.exe --opencover -i opencovertests.xml --repoToken &quot;abcdefghijklmnopqrstuvwxyz&quot; --commitId $env:APPVEYOR_REPO_COMMIT --commitBranch $env:APPVEYOR_REPO_BRANCH --commitAuthor $env:APPVEYOR_REPO_COMMIT_AUTHOR --commitEmail $env:APPVEYOR_REPO_COMMIT_AUTHOR_EMAIL --commitMessage $env:APPVEYOR_REPO_COMMIT_MESSAGE --jobId $env:APPVEYOR_JOB_ID
</code></pre>
<p>This will locate the xml file opencovertests.xml as a result from running opencover on your c# project, and publish it to your coveralls project based on the repoToken &ldquo;abcdefghijklmnopqrstuvwxyz&rdquo; (using your repo token found on your coveralls.io project page) along with the git commit and branch details pulled out of appveyor.</p>
<p>So what does this mean to you? How will you use it? Well you can replace the appveyor environment variables above with the actual values found in your build server, get your repo token from coveralls.io, and plus this in on top of your existing opencover coverage CI.</p>
<p>If you don&rsquo;t currently have opencover hooked up, there are tutorials all over the place for your specific build server, I&rsquo;ll leave you to figure out the best way to get this running.</p>
<p>Don&rsquo;t use/want to use opencover? The next steps for me is to get other coverage reports working with coveralls.net so stay tuned, or go +1 some of my features listed in the <a href="https://github.com/csmacnz/coveralls.net/issues">repository issues</a>.</p>
<p>For me, the next steps is to test this works on my other projects so that I will be in the same situation as anyone else who wants to use it.</p>
</description>
    </item>
    
    <item>
      <title>Hey, I found this thing called Coveralls.io</title>
      <link>https://csmacnzblog.github.io/post/hey-i-found-this-thing-called-coveralls-io/</link>
      <pubDate>Sun, 14 Dec 2014 19:50:47 +0000</pubDate>
      
      <guid>https://csmacnzblog.github.io/post/hey-i-found-this-thing-called-coveralls-io/</guid>
      <description><p>In my pursuit to <a href="//blog.csmac.nz/gulp-vs-net/">find a build task runner for my code coverage</a> I stumbled on this whole other side of the internet I didn&rsquo;t know about (from a .Net developer&rsquo;s perspective). I&rsquo;ve been using <a href="http://www.appveyor.com/">AppVeyor.com</a> for my open-source CI build, which is a great option for anyone with a project on the Microsoft Stack. The cool thing about this (and other similar services) is that if you have an open source project on GitHub, you can use these services with your project for free!</p>
<p>I&rsquo;m aware this isn&rsquo;t new, and there are others like <a href="http://travis-ci.org/">Travis-CI.org</a> which run all the other platforms, but I didn&rsquo;t realise how prolific it really was! Especially how exclusive of microsoft languages they all are. Travis-CI for instance, doesn&rsquo;t seem to support .Net by looking on their <a href="http://docs.travis-ci.com/">docs page</a>, though there does seem to be <a href="http://docs.travis-ci.com/user/languages/csharp/">mono support in beta</a> (and that didnt exist when i looked a week ago, so will keep an eye on this).</p>
<p>But my main reason for this post, is that I found this cool new (to me any way) Continuous Code Coverage host called <a href="https://coveralls.io/">coveralls.io</a>. With a cool name like that, and a badge for my project, I&rsquo;m sold. But wait, lets check <a href="https://coveralls.zendesk.com/hc/en-us">those docs</a> again.  Yip as I thought, no C# support.  They even have C/C++, this is wrong!</p>
<p>Ah but whats this? They have an api? And they want you to add missing support? I think I have to help with this. So now I have looked at the java and python implementations, a little bit of the api documentation, and I now have a project placeholder to support C# from various Code Coverage xml output formats to post that data up to coveralls, at <a href="https://github.com/csmacnz/coveralls.net">coveralls.net on github</a>.  I&rsquo;ve even got my badges, for coveralls.io ready to go.</p>
<p>So fastforward another week and I have a working prototype done. It&rsquo;s even showing <a href="https://coveralls.io/r/csMACnz/coveralls.net">coverage on coveralls.io</a>, supporting opencover xml format.</p>
<p>So whats left now? finish building it to be reusable by my other projects, publish it to nuget and chocolately and wherever else I need to, and start getting people integrating it into their .Net builds. Probably build out other C# coverage report formats as well, so your not forced to use opencover. Wish me luck!</p>
<h6 id="small-side-note">small side note</h6>
<p>So I also found this other continuous code quality metrics thing for python called <a href="https://landscape.io/">landscape.io</a>. When will we see this type of thing available for .Net as well? Turns out right now. Check out
<a href="https://scan.coverity.com/projects/3696">Coverity Scan Static Analysis</a> (<a href="https://scan.coverity.com/projects/3696">mine</a> needs you to create an account to use, but no permissions to view.)</p>
<p>And two more for fun: <a href="https://waffle.io/">waffle.io</a> &amp; <a href="https://readthedocs.org/">readthedocs.org</a></p>
</description>
    </item>
    
  </channel>
</rss>