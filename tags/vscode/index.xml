<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>vscode on csMACnz&#39;s Blog</title>
    <link>https://csmacnzblog.github.io/tags/vscode/</link>
    <description>Recent content in vscode on csMACnz&#39;s Blog</description>
    <image>
      <url>https://csmacnzblog.github.io/favicon.png</url>
      <title>csMACnz&#39;s Blog</title>
      <link>https://csmacnzblog.github.io</link>
    </image>
    <ttl>1440</ttl>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-nz</language>
    <lastBuildDate>Tue, 03 Jan 2017 21:26:42 +0000</lastBuildDate><atom:link href="https://csmacnzblog.github.io/tags/vscode/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>FiraCode, my new favorite VS Code dev font</title>
      <link>https://csmacnzblog.github.io/post/firacode-my-new-favorite-vscode-font/</link>
      <pubDate>Tue, 03 Jan 2017 21:26:42 +0000</pubDate>
      
      <guid>https://csmacnzblog.github.io/post/firacode-my-new-favorite-vscode-font/</guid>
      <description><p>I&rsquo;ve been using Fira Code as my new dev font. And I&rsquo;m sticking with it.</p>
<p><a href="https://github.com/tonsky/FiraCode">FiraCode</a> is available on GitHub, and is a based on the concept of ligatures, targeting at programming symbols.</p>
<p>In short, ligatures are where two or more actual characters are printed as a single printable character, originating in print where certain letters in certain orders would have a special stamp to use in the printing press to represent them. This gives a font a nicer flow and feel.</p>
<p>Applying this concept to programming symbols, we get Fira Code. The name comes from the original font, Fira Mono. (A good mono font should be the basis of any programmers font based on today&rsquo;s most popular languages).</p>
<p>Probably the best way to see what I mean is through the picture shown on GitHub:</p>
<p><img src="https://github.com/tonsky/FiraCode/raw/master/showcases/all_ligatures.png" alt="Fira Code vs Fire Mono"></p>
<p>And luckily installation into your favorite editor is simple. I will <a href="https://github.com/tonsky/FiraCode/wiki">link to all the installation instructions</a> but give you the simple gist of getting it working in Visual Studio Code.</p>
<p>First you need to download and install. The <a href="https://github.com/tonsky/FiraCode/releases/download/1.204/FiraCode_1.204.zip">download link (currently v1.204)</a> is available on the <a href="https://github.com/tonsky/FiraCode#solution"><code>README.md</code> page of the repository</a> and installation on Windows is as easy as opening the zip file, open each <code>.ttf</code> file in the <code>ttf</code> folder and clicking install.</p>
<p>For VS Code, you just need to open the editor settings (<code>File</code>-&gt;<code>Preferences</code>-&gt;<code>User Settings</code> will open the settings file) and then add the following lines to the <code>json</code> file (inside the curly braces) and save:</p>
<pre><code>    &quot;editor.fontFamily&quot;: &quot;Fira Code&quot;,
    &quot;editor.fontSize&quot;: 14,
    &quot;editor.fontLigatures&quot;: true
</code></pre>
<p>If Code was already open when you installed the fonts, you might see everything change to a font that isn&rsquo;t even mono-space. Just restart Code and the correct Fira Code font should take affect.</p>
<p>The biggest difference is that you will notice as you add and remove symbols from symbol pairs the characters on screen will drift a little left and right to be closer, and in many cases the characters actually link up.</p>
<p>These instructions are <a href="https://github.com/tonsky/FiraCode/wiki/VS-Code-Instructions">listed on GitHub as well</a>.</p>
<p>If you are not as bold as me, I still recommend checking out <a href="https://en.wikipedia.org/wiki/Consolas">Consolas</a> as a good mono-space developer font as standard. But I recommend trying Fira Code before ruling it out completely.</p>
</description>
    </item>
    
    <item>
      <title>Visual Studio Code with C# and dotnet</title>
      <link>https://csmacnzblog.github.io/post/visual-studio-code-with-csharp-and-dotnet/</link>
      <pubDate>Sun, 03 Jul 2016 04:34:30 +0000</pubDate>
      
      <guid>https://csmacnzblog.github.io/post/visual-studio-code-with-csharp-and-dotnet/</guid>
      <description><p>Getting Started with Visual Studio Code? Me too. Let&rsquo;s see what it takes to get going. This is a bit of a companion piece alongside my <a href="https://blog.csmac.nz/dotnetcore-getting-started/">.Net Core Series</a> I am writing at the moment. Hopefully as well as .Net Core, I will have a play with writing TypeScript, Rust and maybe C++ inside Visual Studio Code. I might have to focus on the interface in another article as well.</p>
<p>After downloading and installing Visual Studio Code from <a href="https://code.visualstudio.com/">code.visualstudio.com</a>, or installing using <code>choco install visualstudiocode</code> from the command line, there are few things missing.</p>
<p>It seems that, by default, Code is <a href="https://en.wikipedia.org/wiki/Out_of_the_box_(feature)">OOTB</a> ready for JavaScript. But .Net support needs to be installed.</p>
<h3 id="installing-c-support">Installing C# Support</h3>
<p>From inside Visual Studio Code, press <code>Ctrl + p</code> to bring up the Quick Open bar, and type in <code>ext install csharp</code>. This installs the extension
C# for Visual Studio Code (<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.csharp">Details for the extension here</a>). This includes the OmniSharp tooling as well as support for .Net Core (as of version 1.2, RC1 and RC2 versions are no longer supported and this tooling Supports the 1.0.0 release build.), and support for <code>csproj</code> files (which is probably highly in flux, and currently doesn&rsquo;t work on Linux or OS X, apparently).</p>
<h3 id="build-and-run-a-project">Build and Run a Project</h3>
<p>Now that we have our environment set up, we can open a folder with a .Net Core Console Application project in it.  (If you haven&rsquo;t already, check out my <a href="https://blog.csmac.nz/dotnetcore-getting-started/">Getting Started post</a> on creating a new .Net Core application.)</p>
<p>Choose <code>File -&gt; Open Folder...</code> and navigate into or select the folder for your project. This is the one you initialised with the <code>dotnet new</code> command already (<a href="https://blog.csmac.nz/dotnetcore-getting-started/">didn&rsquo;t you?</a>).</p>
<p>If you are lucky, you will see a banner at the top of the screen appear suggesting <code>Required assets to build and debug are missing from your project. Add them?</code>.</p>
<p><img src="http://res.cloudinary.com/csmacnz/image/upload/v1467488141/RequiredBuildAssetsMissing_tawlgc.png" alt="Required assets to build and debug are missing from your project. Add them?"></p>
<p>If so, click <code>Yes</code> and skip to <a href="#thenextstep">the next step</a>. If not, you will need to initialise this manually.</p>
<h4 id="initialise-manually">Initialise manually</h4>
<p>Press F1 to bring up the Command Palette. This is where you can exercise commands against Visual Studio Code. A helpful suggestion menu will pop up, but we want to type in <code>tasks</code>.</p>
<p><img src="http://res.cloudinary.com/csmacnz/image/upload/v1467488343/CommandPaletteTasks_td24bk.png" alt="Enter tasks into the Command Palette."></p>
<p>Highlight the <code>Tasks: Configure Task Runner</code> option and press enter. The UI will change to display <code>Select a task runner</code> in the prompt. Select the option <code>.Net Core</code> from the options and press enter.</p>
<p><img src="http://res.cloudinary.com/csmacnz/image/upload/v1467488344/CommandPaletteSelectTaskRunner_vymepv.png" alt="Select .Net Core from the options."></p>
<h4 id="the-next-step">The next step</h4>
<p>Now you should see that we have created a <code>tasks.json</code> file inside a <code>.vscode</code> folder.  This configures all the tasks that you can run inside VS code such as build, test, run etc.</p>
<p>To run this task, press <code>Ctrl + p</code> to bring up the <code>Quick Open</code> menu, and type in <code>task </code>.  As soon as you add that last space, the hint menu should now show our task <code>build</code>. Either select this and press enter or type in <code>build</code> so that the command bar now says <code>task build</code> and press enter.</p>
<p>Apart from a spinner at the bottom right, there isn&rsquo;t much to see. We should open the Output window using either <code>Ctrl + Shift + U</code> or from the menu <code>View -&gt; Toggle Output</code>. Now we can see the output produced from our build.</p>
<p><img src="http://res.cloudinary.com/csmacnz/image/upload/v1467488343/dotnetCoreBuildOutput_p9wcnt.png" alt="Output showing a successful build."></p>
<p>To add a run command, we just need to modify our task runner. Add the following json below the <code>build</code> command:</p>
<pre><code>,
        {
            &quot;taskName&quot;: &quot;run&quot;,
            &quot;args&quot;: [ ],
            &quot;showOutput&quot;: &quot;always&quot;
        }
</code></pre>
<p>Now use <code>Ctrl + p</code>, type <code>task run</code> and press enter. You should now see the following output in the Output window:</p>
<pre><code>Project MyNewApp (.NETCoreApp,Version=v1.0) will be compiled because inputs were modified
Compiling MyNewApp for .NETCoreApp,Version=v1.0
Compilation succeeded.
    0 Warning(s)
    0 Error(s)
Time elapsed 00:00:01.4849643
 
Hello World!
</code></pre>
<p>Now we have a .Net Core application successfully running inside Visual Studio Code.</p>
<h3 id="debug">Debug</h3>
<p>Of course, we probably want to be able to debug as well as run the application, so let&rsquo;s look at that next.</p>
<p>Switching to debug mode can be done using the Bug icon tab on the left-hand side, by using the menu <code>View -&gt; Debug</code> or by using the shortcut key <code>Ctrl + Shift + D</code>. (<code>Ctrl + Shift + E</code> gets you back to the <strong>E</strong>xplorer View where the files are).</p>
<p><img src="http://res.cloudinary.com/csmacnz/image/upload/v1467488343/VSCodeDebugView_cur5uc.png" alt="Visual Studio Code Debug View."></p>
<p>There is a familiar debug play button in the top of this panel. There is a dropdown beside it that says <code>No Configurations</code>. When we press play for the first time, we will see the Command Palette open again with a selection list. Select the <code>.Net Core</code> option and press enter (or just click on it, both work). Now we will have a <code>launch.json</code> file added into the .vscode folder as well.</p>
<p>When we look back at the dropdown beside the green Debugger button we see it has 3 options in it: <code>.NET Core Launch (console)</code>, <code>.NET Core Launch (web)</code> and <code>.NET Core Attach</code>. These match the names of the three Configurations in the <code>launch.json</code> file.</p>
<p>One thing we need to change is the path in the program variable.</p>
<pre><code>&quot;program&quot;: &quot;${workspaceRoot}/bin/Debug/&lt;target-framework&gt;/&lt;project-name.dll&gt;&quot;,
</code></pre>
<p>Needs to be replaced with:</p>
<pre><code>&quot;program&quot;: &quot;${workspaceRoot}/bin/Debug/netcoreapp1.0/MyNewApp.dll&quot;,
</code></pre>
<p>With the <code>.NET Core Launch (console)</code> option selected in the Configurations dropdown, press the Debugger green play button.</p>
<p>Two things might happen here, depending on If you used Visual studio to create your project, or if you used the <code>dotnet new</code> command.</p>
<h4 id="because-i-used-an-xproj">Because I used an xproj&hellip;</h4>
<p>When we pressed play, we might see it successfully produce output similar to the one below.</p>
<pre><code>Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Private.CoreLib.ni.dll'. Cannot find or open the symbol file.
WARNING: Could not load symbols for 'MyNewApp.dll'. 'c:\dev\temp\MyNewApp\MyNewApp\src\MyNewApp\bin\Debug\netcoreapp1.0\MyNewApp.pdb' is a Windows PDB. These are not supported by the cross-platform .NET Core debugger.
Loaded 'c:\dev\temp\MyNewApp\MyNewApp\src\MyNewApp\bin\Debug\netcoreapp1.0\MyNewApp.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Runtime.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\mscorlib.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Console.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Threading.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.IO.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.IO.FileSystem.Primitives.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Text.Encoding.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Text.Encoding.Extensions.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Threading.Tasks.dll'. Cannot find or open the symbol file.
Hello World!
The program 'c:\dev\temp\MyNewApp\MyNewApp\src\MyNewApp\bin\Debug\netcoreapp1.0\MyNewApp.dll' has exited with code 0 (0x00000000).

</code></pre>
<p>It turns out that this is <em>WARNING</em> near the start is important:</p>
<pre><code>WARNING: Could not load symbols for 'MyNewApp.dll'. 'c:\dev\temp\MyNewApp\MyNewApp\src\MyNewApp\bin\Debug\netcoreapp1.0\MyNewApp.pdb' is a Windows PDB. These are not supported by the cross-platform .NET Core debugger.
</code></pre>
<p>If you don&rsquo;t actually see this warning in your output, just skip ahead to the next <a href="#debugworking">Debug Working</a> section.</p>
<p>If we try to debug at the moment, the breakpoint doesn&rsquo;t get hit. We are missing a setting in our <code>project.json</code> file. The <code>buildOptions</code> section needs a <code>debugType</code> value of <code>portable</code> added, to correctly produce the right kind of <code>pdb</code> files for debugging with Visual Studio Code. Modify your <code>project.json</code> file as below to add <code>&quot;debugType&quot;: &quot;portable&quot;</code> to <code>buildOptions</code></p>
<pre><code>{
  ...
  &quot;buildOptions&quot;: {
    ...
    &quot;debugType&quot;: &quot;portable&quot;
  },
  ...
}
</code></pre>
<p>Now we can continue and we should no longer see the warning.</p>
<h4 id="debug-working">Debug Working</h4>
<p>When we run the debugger now we should see the following output:</p>
<pre><code>Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Private.CoreLib.ni.dll'. Cannot find or open the symbol file.
Loaded 'c:\dev\temp\MyNewApp\MyNewApp\src\MyNewApp\bin\Debug\netcoreapp1.0\MyNewApp.dll'. Symbols loaded.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Runtime.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\mscorlib.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Console.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Threading.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.IO.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.IO.FileSystem.Primitives.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Text.Encoding.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Text.Encoding.Extensions.dll'. Cannot find or open the symbol file.
Loaded 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\1.0.0\System.Threading.Tasks.dll'. Cannot find or open the symbol file.
Hello World!
The program 'c:\dev\temp\MyNewApp\MyNewApp\src\MyNewApp\bin\Debug\netcoreapp1.0\MyNewApp.dll' has exited with code 0 (0x00000000).
</code></pre>
<p>As we can see, apart from some issues loading framework symbols, our app has run correctly.</p>
<p>We can now go into our <code>Program.cs</code> file, add a breakpoint, and successfully break inside our code. Yay!</p>
<p><img src="http://res.cloudinary.com/csmacnz/image/upload/v1467551946/VSCodeDebuggerAttached_yoxcwb.png" alt="Breakpoint hit during debugging on Visual Studio Code."></p>
<p>Thanks to <a href="http://codeclimber.net.nz/archive/2016/05/20/How-to-debug-NET-Core-RC2-app-with-Visual-Studio.aspx">CodeClimber</a> for getting me out when I got stuck in places, too.</p>
<h3 id="solution-level-configuration">Solution Level Configuration</h3>
<p>Now I want to try something harder. I want to find out if we can get something a bit more like what we are used to in Visual Studio instead, with a Solution-level build and run.</p>
<h4 id="caveat">Caveat</h4>
<p>I have no idea if this is possible or sensible, I have not had a chance to see what happens when I have multiple projects that depend on each other, and only one open in code. This is an experiment. What will happen?</p>
<h4 id="open-the-solution">Open the solution</h4>
<p>Choose <code>File -&gt; Open Folder...</code> and navigate into or select the folder for your solution. In my case I have a Visual Studio folder structure like this:</p>
<ul>
<li>MyNewApp
<ul>
<li>src
<ul>
<li>MyNewApp
<ul>
<li>Properties
<ul>
<li>AssemblyInfo.cs</li>
</ul>
</li>
<li>MyNewApp.xproj</li>
<li>Program.cs</li>
<li>project.json</li>
<li>project.lock.json</li>
</ul>
</li>
</ul>
</li>
<li>global.json</li>
<li>MyNewApp.sln</li>
</ul>
</li>
</ul>
<p>(Note: I have excluded some unimportant build artifact files and folders you might see in your directories, such as <code>bin</code>, <code>obj</code> and <code>.vs</code>)</p>
<p>On my machine, I have opened the MyNewApp folder containing the src folder and MyNewApp.sln. What happens next might vary for you if you choose a different location to open.</p>
<p>The first thing that we need to do is set up build tasks. We can start with the default ones and then modify them as needed. As before:</p>
<ul>
<li>F1 launch Command Palette</li>
<li>type tasks</li>
<li>Select <code>Tasks: Configure Task Runner</code></li>
</ul>
<p>This time from the options we will select <code>msbuild</code>. We want to be able to build and run our solution, rather than use the dotnet CLI on a single project.</p>
<p>As earlier, we should now have a <code>tasks.json</code> file inside a <code>.vscode</code> folder inside the top-level folder you Opened earlier. This time, however, it is set up to run MSBuild.</p>
<p>Now we can run it again as we did last time with <code>Ctrl + p</code>, type <code>task build</code> and Enter.</p>
<pre><code>Failed to launch external program msbuild /property:GenerateFullPaths=true.
spawn msbuild ENOENT
</code></pre>
<p>On my machine, it looks like <code>msbuild.exe</code> is not in the path. In my case I am going to add the MSBuild version 14.0 that came with Visual Studio 2015 into my %PATH% environment variable:</p>
<pre><code>C:\Program Files (x86)\MSBuild\14.0\Bin
</code></pre>
<p>And restart Visual Studio Code. (It is nice that it remembers the last folder I had open, too.)</p>
<p>One more <code>Ctrl + Shift + B</code> (or &lsquo;Ctrl + p&rsquo;, <code>task build</code>, Enter) and It looks successful:</p>
<pre><code>Microsoft (R) Build Engine version 14.0.25420.1
Copyright (C) Microsoft Corporation. All rights reserved.
Building the projects in this solution one at a time. To enable parallel build, please add the &quot;/m&quot; switch.
Build started 03/07/2016 16:44:02.
Project &quot;c:\dev\temp\MyNewApp\MyNewApp\MyNewApp.sln&quot; on node 1 (build target(s)).
ValidateSolutionConfiguration:
  Building solution configuration &quot;Debug|Any CPU&quot;.
Project &quot;c:\dev\temp\MyNewApp\MyNewApp\MyNewApp.sln&quot; (1) is building &quot;c:\dev\temp\MyNewApp\MyNewApp\src\MyNewApp\MyNewApp.xproj&quot; (2) on node 1 (default targets).
CoreCompile:
  C:\Program Files\dotnet\dotnet.exe build &quot;c:\dev\temp\MyNewApp\MyNewApp\src\MyNewApp&quot; --configuration Debug --no-dependencies
  Project MyNewApp (.NETCoreApp,Version=v1.0) was previously compiled. Skipping compilation.
Done Building Project &quot;c:\dev\temp\MyNewApp\MyNewApp\src\MyNewApp\MyNewApp.xproj&quot; (default targets).
Done Building Project &quot;c:\dev\temp\MyNewApp\MyNewApp\MyNewApp.sln&quot; (build target(s)).
Build succeeded.
    0 Warning(s)
    0 Error(s)
Time Elapsed 00:00:02.08
</code></pre>
<p>So now I can build my Visual Studio <code>xproj</code> using MSBuild inside Visual Studio Code.</p>
<h4 id="debug-1">Debug</h4>
<p>Just like before, we can set up Debugging with just a few changes:</p>
<ul>
<li>Press the Debugger play button</li>
<li>The Command Palette will open again</li>
<li>Select the <code>.Net Core</code> option and press enter</li>
<li>The <code>launch.json</code> file will be created</li>
<li>Change the path in the program variable.</li>
</ul>
<p>This time, though, we change the path to be a bit longer since we are in a different root directory.</p>
<pre><code>&quot;program&quot;: &quot;${workspaceRoot}/src/MyNewApp/bin/Debug/netcoreapp1.0/MyNewApp.dll&quot;,
</code></pre>
<p>Now we should be ready to place a breakpoint and debug our code.  If you already <a href="#becauseiusedanxproj">followed the earlier instructions</a> with the same project, (or you created it using <code>dotnet new</code>), the <code>&quot;debugType&quot;: &quot;portable&quot;</code> fix should already be there, otherwise, you can apply that now.</p>
<p>Place a breakpoint into <code>Program.cs</code> and hit the green Debug play button. Alternatively, you can use the familiar <code>F5</code> shortcut key to start debugging.  Success!</p>
<h3 id="whats-next">Whats Next?</h3>
<p>So now we can build and debug our application using Visual Studio Code either at the Solution-level or at the project-level.  Going forward we will want to start thinking about tests and running those as well. But I want to go a bit further into how to test using .Net Core from the command-line for a bit before I double back and tackle it in Visual Studio Code.</p>
<p>This has been fun, though probably the longest way to write a blog post. Yes it&rsquo;s a long one too, so I think I&rsquo;ll have to look at breaking things down into small achievable chunks if I do this again.  Thanks for sticking with me and getting to the end.</p>
</description>
    </item>
    
  </channel>
</rss>