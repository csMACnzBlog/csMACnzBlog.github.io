<!DOCTYPE html>
<html lang="en">
    <head>

        <script>
            if(!/blog\.csmac\.nz/.test(window.location.host)) {
                window.location = "https:\/\/blog.csmac.nz\/post\/dotnetcore-nuget\/";
            }
        </script>

        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name='author' content='Mark Clearwater, csmacnz@csmac.co.nz'>
        <meta name='language' content='EN'>
        <meta name='medium' content='blog'>
        <meta name="google-adsense-account" content="ca-pub-4517187877737982">

    
        <title>.Net Core Series - NuGet - csMACnz&#39;s Blog</title>
        <meta name="description" content="This is a series on the .Net Core 1.0 bits. Looking for .Net Core 2 Series?  Getting Started What&rsquo;s in the box Using Multiple Projects Testing NuGet &lt;=(We are here) Multi-targeting Publishing Portable …">
        <meta name='keywords' content='csMACnz, C Sharp, dotnetcore, NuGet'>

        
        <meta property="og:type" content="article"/>
        <meta property="og:title" content=".Net Core Series - NuGet"/>
        <meta property="og:description" content="This is a series on the .Net Core 1.0 bits. Looking for .Net Core 2 Series?  Getting Started What&rsquo;s in the box Using Multiple Projects Testing NuGet &lt;=(We are here) Multi-targeting Publishing Portable …"/>
        <meta property="og:site_name" content="csMACnz&#39;s Blog"/>
        <meta property="og:url" content="https://blog.csmac.nz/post/dotnetcore-nuget/"/>
        <meta property="og:image" content="https://csmac.nz/Content/icon/icon.png"/>

        
        <meta name="twitter:card" content="summary"/>
        <meta name="twitter:title" content=".Net Core Series - NuGet"/>
        <meta name="twitter:description" content="This is a series on the .Net Core 1.0 bits. Looking for .Net Core 2 Series?  Getting Started What&rsquo;s in the box Using Multiple Projects Testing NuGet &lt;=(We are here) Multi-targeting Publishing Portable …"/>
        <meta name="twitter:image" content="https://csmac.nz/Content/icon/icon.png"/>
        <meta name="twitter:site" content="@csMACnz"/>
        <meta name="twitter:creator" content="@csMACnz"/>
    

        <link rel="apple-touch-icon-precomposed" href="/images/icon/apple-touch-icon-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/icon/apple-touch-icon-72x72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/icon/apple-touch-icon-114x114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/icon/apple-touch-icon-144x144-precomposed.png">
        <link rel="icon" type="image/png" href="/images/icon/icon.png" />
        <link rel='me' type='text/html' href='https://github.com/csMACnz'>

        <script>
            var d_id  = 'csmacnz';
        </script>

        <link rel="stylesheet" type="text/css" href="/css/style.css" />
        <link rel="stylesheet" type="text/css" href="/css/blogstyle.css" />

        <link rel="alternate stylesheet" title="dark-code" type="text/css" href="/css/solarized_dark.css" disabled>
        <link rel="stylesheet" title="light-code" type="text/css" href="/css/github-gist.css" disabled>

        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4517187877737982"
        crossorigin="anonymous"></script>

        
        
        <script type="application/ld+json">
        {
            "@context" : "https://schema.org",
            "@type" : "Article",
            "publisher": {
                "@type": "Organization",
                "name": "csMACnz&#x27;s Blog",
                "logo": "https:\/\/blog.csmac.nz\/images\/icon\/apple-touch-icon-144x144-precomposed.png"
            },
            "author": {
                "@type": "Person",
                "name": "Mark Clearwater",
                "image": {
                    "@type": "ImageObject",
                    "url": "//www.gravatar.com/avatar/c97410951ec3738a3fd4a2dfb17a5d9c?d=404&s=250",
                    "width": 440,
                    "height": 295
                },
                "url": "https:\/\/blog.csmac.nz",
                "sameAs": [
                    "https://csmac.nz"
                ]
            },
            "articleSection" : "post",
            "name" : ".Net Core Series - NuGet",
            "headline" : ".Net Core Series - NuGet",
            "url" : "https:\/\/blog.csmac.nz\/post\/dotnetcore-nuget\/",
            "datePublished": "2016-08-01T08:18:33.000Z",
            "dateModified" : "2016-08-01T08:18:33.000Z",
            "image" : {
                "@type": "ImageObject",
                "url": "http:\/\/res.cloudinary.com\/csmacnz\/image\/upload\/c_scale,w_440\/v1486488602\/csMACnzNetCoreSeries_e7uifa.png",
                "width": 440,
                "height": 295
            },
            "keywords" : [ "C Sharp", "dotnetcore", "NuGet" ]
            "description" : "This is a series on the new .Net Core bits.\nIs this article, we will focus on NuGet Packaging of your .Net Libraries using .Net Core.",
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https:\/\/blog.csmac.nz"
            }
            "inLanguage" : "en-US",
            "author" : "Mark Clearwater",
            "creator" : "Mark Clearwater",
            "accountablePerson" : "Mark Clearwater",
            "copyrightHolder" : "Mark Clearwater",
            "copyrightYear" : "2016",
            "wordCount" : "553",
        }
        </script>
        
        
        
    </head>
    <body class="blog">
        <div class="page-area">

            <header class="header-area">
                <h1 class="header-area-title">csMACnz</h1>
            </header>
            <nav class="navigation-area header-bar-parent">
                <div class="header-bar header-bar-blog">
                    <ul class="menu">
                        <li class="menu-item"><a class="menu-item-content" href="https://csmac.nz">Home</a></li>
                        <li class="menu-item"><a class="menu-item-content" href="https://csmac.nz/baconvaders">Bacon Vaders</a></li>
                        <li class="menu-item"><a class="menu-item-content CurrentButton" href="https://blog.csmac.nz">Blog</a></li>
                        <li class="menu-item"><a class="menu-item-content" href="https://csmac.nz/metablog">Meta</a></li>
                    </ul>
                </div>
            </nav>

            <div id="content" class="content-area">

<!--Page Content Begins-->

<article>
    <div class="content-box" itemscope itemtype=" https://schema.org/Article"><span class="post-meta"><time datetime="2016-08-01"  itemprop="datePublished">01 Aug 16</time> in <a href="/categories/software-engineering">Software Engineering</a> on <a href="/tags/c-sharp">C Sharp</a>,  <a href="/tags/dotnetcore">dotnetcore</a>,  <a href="/tags/nuget">NuGet</a></span>
<h1 class="post-title" itemprop="headline">.Net Core Series - NuGet</h1>
    
        <section class="post-content"  itemprop="articleBody">
            <img class="post-image" src="http://res.cloudinary.com/csmacnz/image/upload/c_scale,w_440/v1486488602/csMACnzNetCoreSeries_e7uifa.png"><p>This is a series on the .Net Core 1.0 bits. Looking for <a href="/dotnetcore2-getting-started">.Net Core 2 Series</a>?</p>
<ul>
<li><a href="/dotnetcore-getting-started">Getting Started</a></li>
<li><a href="/dotnetcore-whats-in-the-box">What&rsquo;s in the box</a></li>
<li><a href="/dotnetcore-testing">Using Multiple Projects</a></li>
<li><a href="/dotnetcore-testing">Testing</a></li>
<li>NuGet &lt;=(We are here)</li>
<li><a href="/dotnetcore-multi-targeting">Multi-targeting</a></li>
<li><a href="/dotnetcore-publishing-portable-applications">Publishing Portable Applications</a></li>
<li><a href="/dotnetcore-self-contained-applications">Self-contained Applications</a></li>
</ul>
<p>Let&rsquo;s set aside Application packing for later, and focus our attention on NuGet.</p>
<h3 id="our-demo-library">Our Demo library</h3>
<p>Again we will quickly whip up a library to use:</p>
<pre tabindex="0"><code>mkdir mynewpackage
cd mynewpackage
dotnet new -t Lib
dotnet restore
dotnet build
</code></pre><p>Some quick touch-ups to make it more interesting. Replace Library.cs with this again:</p>
<pre tabindex="0"><code>namespace mynewpackage
{
    public class Calculator
    {
        public int Add(int first, int second)
        {
            return first + second;
        }
    }
}
</code></pre><p>At least now our package contains something interesting.</p>
<h3 id="simple-packing">Simple Packing</h3>
<p>It isn&rsquo;t very difficult to turn our library into a <code>nupkg</code> (pronounced <a href="https://twitter.com/csharpfritz/status/519927456191758336">NUP-KEG</a>, of course).</p>
<pre tabindex="0"><code>dotnet pack
</code></pre><p>This leaves us with a directory structure like so:</p>
<pre tabindex="0"><code>mynewpackage  
|-- Library.cs
|-- project.json
|-- project.lock.json
+-- bin
     +-- Debug
          |-- mynewpackage.1.0.0.nupkg
          |-- mynewpackage.1.0.0.symbols.nupkg
          +-- netstandard1.6
               |-- mynewpackage.deps.json
               |-- mynewpackage.dll
               +-- mynewpackage.pdb
</code></pre><p>(Note that I have left out the <code>obj</code> folder), we can see two new files have been created under <code>/bin/Debug</code>: <code>mynewpackage.1.0.0.nupkg</code> and <code>mynewpackage.1.0.0.symbols.nupkg</code>.</p>
<p>These are the NuGet packages. Pretty easy huh?  The version number comes from the <code>project.json</code> file:</p>
<pre tabindex="0"><code>{
  &#34;version&#34;: &#34;1.0.0-*&#34;,
  &#34;buildOptions&#34;: {
    &#34;debugType&#34;: &#34;portable&#34;
  },
  &#34;dependencies&#34;: {},
  &#34;frameworks&#34;: {
    &#34;netstandard1.6&#34;: {
      &#34;dependencies&#34;: {
        &#34;NETStandard.Library&#34;: &#34;1.6.0&#34;
      }
    }
  }
}
</code></pre><p>But that was a <code>Debug</code> build. To produce a release build instead:</p>
<pre tabindex="0"><code>dotnet pack -c Release
</code></pre><p>Now we have some new files:</p>
<pre tabindex="0"><code>mynewpackage  
|-- Library.cs
|-- project.json
|-- project.lock.json
+-- bin
     +-- Debug
     |    |-- mynewpackage.1.0.0.nupkg
     |    |-- mynewpackage.1.0.0.symbols.nupkg
     |    +-- netstandard1.6
     |         |-- mynewpackage.deps.json
     |         |-- mynewpackage.dll
     |         +-- mynewpackage.pdb
     +-- Release
          |   mynewpackage.2.0.0.nupkg
          |   mynewpackage.2.0.0.symbols.nupkg
          +-- netstandard1.6
               |-- mynewpackage.deps.json
               |-- mynewpackage.dll
               |-- mynewpackage.pdb
</code></pre><p>We can see that we now have a <code>Release</code> folder (containing a <code>netstandard1.6</code> folder, thanks to an automatic build before the pack) and in the <code>Release</code> folder, we again have <code>mynewpackage.1.0.0.nupkg</code> and <code>mynewpackage.1.0.0.symbols.nupkg</code> files.</p>
<h3 id="crack-open-a-nupkg">Crack open a nupkg</h3>
<p>What do these <code>nupkg</code> files look like on the inside? Using a tool like <a href="https://github.com/NuGetPackageExplorer/NuGetPackageExplorer">NuGet Package Explorer</a> we can take a look. The Release version looks like this:</p>
<pre tabindex="0"><code>mynewpackage.1.0.0.nupkg
|-- mynewpackage.nuspec
+-- lib
     +-- netstandard1.6
          +-- mynewpackage.dll
</code></pre><p>Some things to observe. We only have a lib file for <code>netstandard1.6</code> target profile. This means that our NuGet package only works with new .Net Core applications targeting NetStandard1.6 (and the upcoming 4.6.3).</p>
<p>Changing our attention to the contents of the <code>nuspec</code> file:</p>
<pre tabindex="0"><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;package xmlns=&#34;http://schemas.microsoft.com/packaging/2012/06/nuspec.xsd&#34;&gt;
    &lt;metadata&gt;
        &lt;id&gt;mynewpackage&lt;/id&gt;
        &lt;version&gt;1.0.0&lt;/version&gt;
        &lt;authors&gt;mynewpackage&lt;/authors&gt;
        &lt;owners&gt;mynewpackage&lt;/owners&gt;
        &lt;requireLicenseAcceptance&gt;false&lt;/requireLicenseAcceptance&gt;
        &lt;description&gt;mynewpackage&lt;/description&gt;
        &lt;dependencies&gt;
            &lt;group targetFramework=&#34;.NETStandard1.6&#34;&gt;
                &lt;dependency id=&#34;NETStandard.Library&#34; version=&#34;1.6.0&#34; /&gt;
            &lt;/group&gt;
        &lt;/dependencies&gt;
    &lt;/metadata&gt;
&lt;/package&gt;
</code></pre><p>We didn&rsquo;t override any properties in our <code>project.json</code> file. But we can see here that the project folder name <code>mynewpackage</code> is used to populate the package <code>id</code>, <code>authors</code>, <code>owners</code> and <code>description</code>. Play around for yourself at setting the correct properties in the <code>project.json</code> to produce your desired <code>nupkg</code> values.</p>
<p>We also see that under dependencies there is a <code>targetFramework=&quot;.NETStandard1.6&quot;</code> group, with a dependency on <code>NETStandard.Library</code> version <code>1.6.0</code>.</p>
<h3 id="and-the-next-time">And the next time&hellip;</h3>
<p>We can build packages to be used by new .Net Core applications. But we probably want to build libraries that can be used from our .Net 4.0, Windows Phone and UWP applications as well.  Next up, we see how to extend our package to handle just these situations.</p>
</section>
        
        <section class="share">
            Share: 
            <a class="icon-twitter" href="https://twitter.com/share?text=.Net%20Core%20Series%20-%20NuGet&url=https%3a%2f%2fblog.csmac.nz%2fpost%2fdotnetcore-nuget%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <span>Twitter</span>
            </a>
            |
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.csmac.nz%2fpost%2fdotnetcore-nuget%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <span>Facebook</span>
            </a>
        </section>
    </div>
    <div class="content-box">
        
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = d_id; 
            var disqus_title = '.Net Core Series - NuGet';
            
             
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    </div>
</article>

<!--Page Content Ends-->

            </div><aside class="sidebar-area">

<!--Sidebar Content Begins-->

                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-mastodon">Mastodon</div>
                    
                    
                    <iframe allowfullscreen sandbox="allow-top-navigation allow-scripts" width="280" height="400" src="https://maplefeed.bihlink.com/apiv2/feed?userurl=https%3A%2F%2Fmastodon.nz%2F%2Fusers%2Fcsmacnz&theme=modern-light&size=80&header=true&replies=false&boosts=false"></iframe>
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-rss">Subscribe</div>
                    
                    <a href="/rssfeeds/" title="csMACnz's Blog">RSS Feeds</a>
                    <a href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Ffeeds.feedburner.com%2FcsmacnzBlog" target="_blank" title="csMACnz&amp;#039;s Blog"><img src="https://s3.feedly.com/feedburner/feedly.png" alt="" style="border:0"/></a>
                    <br />
                    <a href="https://www.patreon.com/csMACnz" target="_blank"><img src="/images/patreon.png" /></a>
                    
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-xbox">Gamercard</div>
                    

                    <div>
                        <a href="https://www.exophase.com/xbox/user/csMACnz/"><img width="288px" src="https://card.exophase.com/1/1476805.png"></a>
                        <a href="http://steamcommunity.com/id/csMACnz/" target="_blank"><img src="https://www.steamsignature.com/status/english/76561197994712512.png" alt="" title="csMACnz's Steam Profile" /></a>
                    </div>
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-ads">Advertisement</div>
                    
                    <div>
                        
                        <ins class="adsbygoogle"
                            style="display:block"
                            data-ad-client="ca-pub-4517187877737982"
                            data-ad-slot="3618449993"
                            data-ad-format="auto"
                            data-full-width-responsive="true"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                    
                </div>

<!--Sidebar Content Ends-->

            </aside>

            <footer class="footer-area">

            <p>
                Designed and Maintained by Mark Clearwater; Last updated August 2021.
                <!-- This used to be something useful, now it is just a hack I left it to make layout easier but also as a fun reminder for me of what it used to be -->
                <br /><a class="footer-link" >¯\_(ツ)_/¯</a>
            </p>

            </footer>
        </div>

<!--body scripts Begins-->

        
        <script src="/js/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <script src="/js/codetoggle.js"></script> 

        
        <script src="/js/htmx.min.js"></script>

        
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-08VK9VD3ET"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-08VK9VD3ET');
        </script>

        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<!--body scripts Ends-->


<!-------------------------------->
<!--                            -->
<!--  _(\    |@@|               -->
<!-- (__/\__ \--/ __            -->
<!--    \___|----|  |   __      -->
<!--        \ }{ /\ )_ / _\     -->
<!--        /\__/\ \__O (__     -->
<!--       (--/\--)    \__/     -->
<!--       _)(  )(_             -->
<!--      `---''---`            -->
<!--                            -->
<!-- https://github.com/csMACnz -->
<!-------------------------------->

    </body>
</html>
