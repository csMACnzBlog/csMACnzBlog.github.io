<!DOCTYPE html>
<html lang="en">
    <head>

        <script>
            if(!/blog\.csmac\.nz/.test(window.location.host)) {
                window.location = "https:\/\/blog.csmac.nz\/post\/dotnetcore2-testing\/";
            }
        </script>

        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name='author' content='Mark Clearwater, csmacnz@csmac.co.nz'>
        <meta name='language' content='EN'>
        <meta name='medium' content='blog'>
        <meta name="google-adsense-account" content="ca-pub-4517187877737982">

    
        <title>.Net Core SDK 2.* Series - Testing - csMACnz&#39;s Blog</title>
        <meta name="description" content="This is a series on the latest 2.* .Net Core bits, Following on from the original .Net Core Series  Getting Started What&rsquo;s in the box Using Multiple Projects Testing &lt;=(We are here) NuGet Multi-targeting …">
        <meta name='keywords' content='csMACnz, dotnetcore'>

        
        <meta property="og:type" content="article"/>
        <meta property="og:title" content=".Net Core SDK 2.* Series - Testing"/>
        <meta property="og:description" content="This is a series on the latest 2.* .Net Core bits, Following on from the original .Net Core Series  Getting Started What&rsquo;s in the box Using Multiple Projects Testing &lt;=(We are here) NuGet Multi-targeting …"/>
        <meta property="og:site_name" content="csMACnz&#39;s Blog"/>
        <meta property="og:url" content="https://blog.csmac.nz/post/dotnetcore2-testing/"/>
        <meta property="og:image" content="https://csmac.nz/Content/icon/icon.png"/>

        
        <meta name="twitter:card" content="summary"/>
        <meta name="twitter:title" content=".Net Core SDK 2.* Series - Testing"/>
        <meta name="twitter:description" content="This is a series on the latest 2.* .Net Core bits, Following on from the original .Net Core Series  Getting Started What&rsquo;s in the box Using Multiple Projects Testing &lt;=(We are here) NuGet Multi-targeting …"/>
        <meta name="twitter:image" content="https://csmac.nz/Content/icon/icon.png"/>
        <meta name="twitter:site" content="@csMACnz"/>
        <meta name="twitter:creator" content="@csMACnz"/>
    

        <link rel="apple-touch-icon-precomposed" href="/images/icon/apple-touch-icon-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/icon/apple-touch-icon-72x72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/icon/apple-touch-icon-114x114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/icon/apple-touch-icon-144x144-precomposed.png">
        <link rel="icon" type="image/png" href="/images/icon/icon.png" />
        <link rel='me' type='text/html' href='https://github.com/csMACnz'>

        <script>
            var d_id  = 'csmacnz',
                g_id  = 'G-08VK9VD3ET';
        </script>

        <link rel="stylesheet" type="text/css" href="/css/style.css" />
        <link rel="stylesheet" type="text/css" href="/css/blogstyle.css" />

        <link rel="alternate stylesheet" title="dark-code" type="text/css" href="/css/solarized_dark.css" disabled>
        <link rel="stylesheet" title="light-code" type="text/css" href="/css/github-gist.css" disabled>

        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4517187877737982"
        crossorigin="anonymous"></script>

        
        
        <script type="application/ld+json">
        {
            "@context" : "https://schema.org",
            "@type" : "Article",
            "publisher": {
                "@type": "Organization",
                "name": "csMACnz&#x27;s Blog",
                "logo": "https:\/\/blog.csmac.nz\/images\/icon\/apple-touch-icon-144x144-precomposed.png"
            },
            "author": {
                "@type": "Person",
                "name": "Mark Clearwater",
                "image": {
                    "@type": "ImageObject",
                    "url": "//www.gravatar.com/avatar/c97410951ec3738a3fd4a2dfb17a5d9c?d=404&s=250",
                    "width": 440,
                    "height": 295
                },
                "url": "https:\/\/blog.csmac.nz",
                "sameAs": [
                    "https://csmac.nz"
                ]
            },
            "articleSection" : "post",
            "name" : ".Net Core SDK 2.* Series - Testing",
            "headline" : ".Net Core SDK 2.* Series - Testing",
            "url" : "https:\/\/blog.csmac.nz\/post\/dotnetcore2-testing\/",
            "datePublished": "2018-02-12T04:00:00.000Z",
            "dateModified" : "2018-02-12T04:00:00.000Z",
            "keywords" : [ "dotnetcore" ]
            "description" : "This is a series on the latest 2.* .Net Core bits, Following on from the original .Net Core Series\nGetting Started What\u0026rsquo;s in the box Using Multiple Projects Testing \u0026lt;=(We are here) NuGet Multi-targeting Publishing Portable Applications Self-contained Applications (At the time of writing, 2.1.4. I use windows, you don\u0026rsquo;t have to!)\nThe Setup Like before, we will rattle off a new project.\nmkdir MyTestApplicationRepo\rcd MyTestApplicationRepo\rmkdir MyLib\rcd MyLib\rdotnet new classlib\rcd .",
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https:\/\/blog.csmac.nz"
            }
            "inLanguage" : "en-US",
            "author" : "Mark Clearwater",
            "creator" : "Mark Clearwater",
            "accountablePerson" : "Mark Clearwater",
            "copyrightHolder" : "Mark Clearwater",
            "copyrightYear" : "2018",
            "wordCount" : "755",
        }
        </script>
        
        
        
    </head>
    <body class="blog">
        <div class="page-area">

            <header class="header-area">
                <h1 class="header-area-title">csMACnz</h1>
            </header>
            <nav class="navigation-area header-bar-parent">
                <div class="header-bar header-bar-blog">
                    <ul class="menu">
                        <li class="menu-item"><a class="menu-item-content" href="https://csmac.nz">Home</a></li>
                        <li class="menu-item"><a class="menu-item-content" href="https://csmac.nz/baconvaders">Bacon Vaders</a></li>
                        <li class="menu-item"><a class="menu-item-content CurrentButton" href="https://blog.csmac.nz">Blog</a></li>
                        <li class="menu-item"><a class="menu-item-content" href="https://csmac.nz/metablog">Meta</a></li>
                    </ul>
                </div>
            </nav>

            <div id="content" class="content-area">

<!--Page Content Begins-->

<article>
    <div class="content-box" itemscope itemtype=" https://schema.org/Article"><span class="post-meta"><time datetime="2018-02-12"  itemprop="datePublished">12 Feb 18</time> in <a href="/categories/software-engineering">Software Engineering</a> on <a href="/tags/dotnetcore">dotnetcore</a></span>
<h1 class="post-title" itemprop="headline">.Net Core SDK 2.* Series - Testing</h1>
    
        <section class="post-content"  itemprop="articleBody">
            <p>This is a series on the latest 2.* .Net Core bits, Following on from the original <a href="https://blog.csmac.nz/dotnetcore-getting-started">.Net Core Series</a></p>
<ul>
<li><a href="/dotnetcore2-getting-started">Getting Started</a></li>
<li><a href="/dotnetcore2-whats-in-the-box">What&rsquo;s in the box</a></li>
<li><a href="/dotnetcore2-using-multiple-projects">Using Multiple Projects</a></li>
<li>Testing &lt;=(We are here)</li>
<li><a href="/dotnetcore2-nuget">NuGet</a></li>
<li><a href="/dotnetcore2-multi-targeting">Multi-targeting</a></li>
<li><a href="/dotnetcore2-publishing-portable-applications">Publishing Portable Applications</a></li>
<li><a href="/dotnetcore2-self-contained-applications">Self-contained Applications</a></li>
</ul>
<p>(At the time of writing, 2.1.4. I use windows, you don&rsquo;t have to!)</p>
<h3 id="the-setup">The Setup</h3>
<p>Like before, we will rattle off a new project.</p>
<pre tabindex="0"><code>mkdir MyTestApplicationRepo
cd MyTestApplicationRepo
mkdir MyLib
cd MyLib
dotnet new classlib
cd ../
dotnet new sln
dotnet sln add ./MyLib/MyLib.csproj
</code></pre><p>(Refer back to <a href="dotnetcore2-using-multiple-projects">Using Multiple Projects</a> where we learned these commands)</p>
<p>And we will also replace <code>.\MyLib\Class1.cs</code> content:</p>
<pre tabindex="0"><code>using System;

namespace MyLib  
{
    public class Calculator
    {
        public int Add(int first, int second)
        {
            return first + second;
        }
    }
}
</code></pre><p>And to be sure that everything is working, we can do a build.</p>
<pre tabindex="0"><code>dotnet build
</code></pre><p>This puts us in a similar situation to the <a href="https://blog.csmac.nz/dotnetcore2-using-multiple-projects/">last post</a> (minus the application).</p>
<h3 id="add-a-test-project">Add a test project</h3>
<p>On with the testing. Getting the project set up is not much different to the way we linked a library and app last time.</p>
<pre tabindex="0"><code>mkdir MyLib.Tests
cd MyLib.Tests
dotnet new xunit
</code></pre><p>For good measure, we will add this to our solution as well.</p>
<pre tabindex="0"><code>cd ../
dotnet sln add MyLib.Tests/MyLib.Tests.csproj
</code></pre><h3 id="test-the-project">Test the project!</h3>
<p>If we open up the <code>.\MyLib.Tests\UnitTest1.cs</code> file we see:</p>
<pre tabindex="0"><code>using System;
using Xunit;

namespace MyLib.Tests
{
    public class UnitTest1
    {
        [Fact]
        public void Test1()
        {

        }
    }
}
</code></pre><p>Pretty straightforward. So if everything is set up correctly we should be able to just run the test.</p>
<pre tabindex="0"><code>dotnet test
</code></pre><pre tabindex="0"><code>Build started, please wait...
Build started, please wait...
Build completed.

Test run for C:\dev\MyTestApplicationRepo\MyLib\bin\Debug\netstandard2.0\MyLib.dll(.NETStandard,Version=v2.0)
Microsoft (R) Test Execution Command Line Tool Version 15.5.0
Copyright (c) Microsoft Corporation.  All rights reserved.

Starting test execution, please wait...
No test is available in C:\dev\MyTestApplicationRepo\MyLib\bin\Debug\netstandard2.0\MyLib.dll. Make sure test project has a NuGet reference for the package &#34;Microsoft.NET.Test.Sdk&#34; and framework version settings are appropriate and try again.

Test Run Aborted.
Build completed.

Test run for C:\dev\MyTestApplicationRepo\MyLib.Tests\bin\Debug\netcoreapp2.0\MyLib.Tests.dll(.NETCoreApp,Version=v2.0)
Microsoft (R) Test Execution Command Line Tool Version 15.5.0
Copyright (c) Microsoft Corporation.  All rights reserved.

Starting test execution, please wait...
[xUnit.net 00:00:00.3854024]   Discovering: MyLib.Tests
[xUnit.net 00:00:00.4414056]   Discovered:  MyLib.Tests
[xUnit.net 00:00:00.4471599]   Starting:    MyLib.Tests
[xUnit.net 00:00:00.5721680]   Finished:    MyLib.Tests

Total tests: 1. Passed: 1. Failed: 0. Skipped: 0.
Test Run Successful.
Test execution time: 1.3026 Seconds
</code></pre><p>A successful test run. Though there were some errors at the start. Something to keep in mind when you run tests from the solution, it will try and run tests from every project in the solution. This may not be a problem for you, but if it annoys you, you can just test the one project using:</p>
<pre tabindex="0"><code>dotnet test .\MyLib.Tests\MyLib.Tests.csproj
</code></pre><p>You can also just run <code>dotnet test</code> from inside the project folder instead.</p>
<p>As usual, calling <code>dotnet test</code> can also cause a restore and/or a build, if it is required.</p>
<h3 id="reference-the-project">Reference the project</h3>
<p>We need to reference the library from the test project. Just like last time, we can use the add reference CLI functionality.</p>
<pre tabindex="0"><code>cd ./MyLib.Tests
dotnet add reference ..\MyLib\MyLib.csproj
</code></pre><pre tabindex="0"><code>Reference `..\MyLib\MyLib.csproj` added to the project.
</code></pre><p>To make sure we are in good order:</p>
<pre tabindex="0"><code>dotnet test
</code></pre><pre tabindex="0"><code>Build started, please wait...
Build completed.

Test run for C:\dev\MyTestApplicationRepo\MyLib.Tests\bin\Debug\netcoreapp2.0\MyLib.Tests.dll(.NETCoreApp,Version=v2.0)
Microsoft (R) Test Execution Command Line Tool Version 15.5.0
Copyright (c) Microsoft Corporation.  All rights reserved.

Starting test execution, please wait...
[xUnit.net 00:00:01.5799270]   Discovering: MyLib.Tests
[xUnit.net 00:00:01.6447464]   Discovered:  MyLib.Tests
[xUnit.net 00:00:01.6504343]   Starting:    MyLib.Tests
[xUnit.net 00:00:01.8191177]   Finished:    MyLib.Tests

Total tests: 1. Passed: 1. Failed: 0. Skipped: 0.
Test Run Successful.
Test execution time: 2.6617 Seconds
</code></pre><h3 id="test-the-library">Test the library</h3>
<p>It&rsquo;s one thing to reference the project, it is another to actually use its code.</p>
<p>First, we will add a <code>using</code> to our <code>UnitTest1.cs</code> file:</p>
<pre tabindex="0"><code>using MyLib;
</code></pre><p>And add another test:</p>
<pre tabindex="0"><code>[Fact]
public void OnePlusOneIsTwo()
{
    var calculator = new Calculator();
    var result = calculator.Add(1, 1);
    Assert.Equal(2, result);
}
</code></pre><p>Since we can build and test with one command, run:</p>
<pre tabindex="0"><code>dotnet test
</code></pre><pre tabindex="0"><code>Build started, please wait...
Build completed.

Test run for C:\dev\MyTestApplicationRepo\MyLib.Tests\bin\Debug\netcoreapp2.0\MyLib.Tests.dll(.NETCoreApp,Version=v2.0)
Microsoft (R) Test Execution Command Line Tool Version 15.5.0
Copyright (c) Microsoft Corporation.  All rights reserved.

Starting test execution, please wait...
[xUnit.net 00:00:00.4541867]   Discovering: MyLib.Tests
[xUnit.net 00:00:00.5220094]   Discovered:  MyLib.Tests
[xUnit.net 00:00:00.5290939]   Starting:    MyLib.Tests
[xUnit.net 00:00:00.6742797]   Finished:    MyLib.Tests

Total tests: 2. Passed: 2. Failed: 0. Skipped: 0.
Test Run Successful.
Test execution time: 1.4901 Seconds
</code></pre><p>We now have a successful test passing in the xUnit.net CLI test runner using code from our own .Net Core library.</p>
<h3 id="stay-tuned">Stay Tuned&hellip;</h3>
<p>Before we can think about publishing our awesome library we need a way to pack it up. Tune in next week.</p>
</section>
        
        <section class="share">
            Share: 
            <a class="icon-twitter" href="https://twitter.com/share?text=.Net%20Core%20SDK%202.%2a%20Series%20-%20Testing&url=https%3a%2f%2fblog.csmac.nz%2fpost%2fdotnetcore2-testing%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <span>Twitter</span>
            </a>
            |
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.csmac.nz%2fpost%2fdotnetcore2-testing%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <span>Facebook</span>
            </a>
        </section>
    </div>
    <div class="content-box">
        
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = d_id; 
            var disqus_title = '.Net Core SDK 2.* Series - Testing';
            
             
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    </div>
</article>

<!--Page Content Ends-->

            </div><aside class="sidebar-area">

<!--Sidebar Content Begins-->

                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-mastodon">Mastodon</div>
                    
                    
                    <iframe allowfullscreen sandbox="allow-top-navigation allow-scripts" width="280" height="400" src="https://maplefeed.bihlink.com/apiv2/feed?userurl=https%3A%2F%2Fmastodon.nz%2F%2Fusers%2Fcsmacnz&theme=modern-light&size=80&header=true&replies=false&boosts=false"></iframe>
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-rss">Subscribe</div>
                    
                    <a href="/rssfeeds/" title="csMACnz's Blog">RSS Feeds</a>
                    <a href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Ffeeds.feedburner.com%2FcsmacnzBlog" target="_blank" title="csMACnz&amp;#039;s Blog"><img src="https://s3.feedly.com/feedburner/feedly.png" alt="" style="border:0"/></a>
                    <br />
                    <a href="https://www.patreon.com/csMACnz" target="_blank"><img src="/images/patreon.png" /></a>
                    
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-xbox">Gamercard</div>
                    

                    <div>
                        <a href="https://www.exophase.com/xbox/user/csMACnz/"><img width="288px" src="https://card.exophase.com/1/1476805.png"></a>
                        <a href="http://steamcommunity.com/id/csMACnz/" target="_blank"><img src="https://www.steamsignature.com/status/english/76561197994712512.png" alt="" title="csMACnz's Steam Profile" /></a>
                    </div>
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-ads">Advertisement</div>
                    
                    <div>
                        
                        <ins class="adsbygoogle"
                            style="display:block"
                            data-ad-client="ca-pub-4517187877737982"
                            data-ad-slot="3618449993"
                            data-ad-format="auto"
                            data-full-width-responsive="true"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                    
                </div>

<!--Sidebar Content Ends-->

            </aside>

            <footer class="footer-area">

            <p>
                Designed and Maintained by Mark Clearwater; Last updated August 2021.
                <!-- This used to be something useful, now it is just a hack I left it to make layout easier but also as a fun reminder for me of what it used to be -->
                <br /><a class="footer-link" >¯\_(ツ)_/¯</a>
            </p>

            </footer>
        </div>

<!--body scripts Begins-->

        
        <script src="/js/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <script src="/js/codetoggle.js"></script> 

        
        <script src="/js/htmx.min.js"></script>

        
        <script async src="https://www.googletagmanager.com/gtag/js?id="+g_id></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', g_id);
        </script>

        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<!--body scripts Ends-->


<!-------------------------------->
<!--                            -->
<!--  _(\    |@@|               -->
<!-- (__/\__ \--/ __            -->
<!--    \___|----|  |   __      -->
<!--        \ }{ /\ )_ / _\     -->
<!--        /\__/\ \__O (__     -->
<!--       (--/\--)    \__/     -->
<!--       _)(  )(_             -->
<!--      `---''---`            -->
<!--                            -->
<!-- https://github.com/csMACnz -->
<!-------------------------------->

    </body>
</html>
