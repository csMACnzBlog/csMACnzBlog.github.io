<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name='author' content='Mark Clearwater, csmacnz@csmac.co.nz'>
        <meta name='language' content='EN'>
        <meta name='medium' content='blog'>

    
        <title>Looking back on C# 6: Initializers - csMACnz&#39;s Blog</title>
        <meta name="description" content="With C# 8 on our doorstep, I figure it is a good time to reflect on recent additions to the language that have come before. There are some great improvements you may have missed, some that I really enjoy using, and some …">
        <meta name='keywords' content='csMACnz, c#'>

        
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Looking back on C# 6: Initializers"/>
        <meta property="og:description" content="With C# 8 on our doorstep, I figure it is a good time to reflect on recent additions to the language that have come before. There are some great improvements you may have missed, some that I really enjoy using, and some …"/>
        <meta property="og:site_name" content="csMACnz&#39;s Blog"/>
        <meta property="og:url" content="https://blogmigration.csmac.nz/post/looking-back-on-csharp6-initializers/"/>
        <meta property="og:image" content="https://csmac.nz/Content/icon/icon.png"/>

        
        <meta name="twitter:card" content="summary"/>
        <meta name="twitter:title" content="Looking back on C# 6: Initializers"/>
        <meta name="twitter:description" content="With C# 8 on our doorstep, I figure it is a good time to reflect on recent additions to the language that have come before. There are some great improvements you may have missed, some that I really enjoy using, and some …"/>
        <meta name="twitter:image" content="https://csmac.nz/Content/icon/icon.png"/>
        <meta name="twitter:site" content="@csMACnz"/>
        <meta name="twitter:creator" content="@csMACnz"/>
    

        <link rel="apple-touch-icon-precomposed" href="/images/icon/apple-touch-icon-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/icon/apple-touch-icon-72x72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/icon/apple-touch-icon-114x114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/icon/apple-touch-icon-144x144-precomposed.png">
        <link rel="icon" type="image/png" href="/images/icon/icon.png" />
        <link rel='me' type='text/html' href='https://github.com/csMACnz'>

        <script>
            var d_id  = 'csmacnz',
                g_id  = 'UA-18464866-2',
                g_url = 'auto';
        </script>

        <link rel="stylesheet" type="text/css" href="/css/style.css" />
        <link rel="stylesheet" type="text/css" href="/css/blogstyle.css" />

        <link rel="alternate stylesheet" title="dark-code" type="text/css" href="/css/solarized_dark.css" disabled>
        <link rel="stylesheet" title="light-code" type="text/css" href="/css/github-gist.css" disabled>

        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4517187877737982"
        crossorigin="anonymous"></script>

        
        
        <script type="application/ld+json">
        {
            "@context" : "https://schema.org",
            "@type" : "Article",
            "publisher": {
                "@type": "Organization",
                "name": "csMACnz&#x27;s Blog",
                "logo": "https:\/\/blogmigration.csmac.nz\/images\/icon\/apple-touch-icon-144x144-precomposed.png"
            },
            "author": {
                "@type": "Person",
                "name": "Mark Clearwater",
                "image": {
                    "@type": "ImageObject",
                    "url": "//www.gravatar.com/avatar/c97410951ec3738a3fd4a2dfb17a5d9c?d=404&s=250",
                    "width": 440,
                    "height": 295
                },
                "url": "https:\/\/blogmigration.csmac.nz",
                "sameAs": [
                    "https://csmac.nz"
                ]
            },
            "articleSection" : "post",
            "name" : "Looking back on C# 6: Initializers",
            "headline" : "Looking back on C# 6: Initializers",
            "url" : "https:\/\/blogmigration.csmac.nz\/post\/looking-back-on-csharp6-initializers\/",
            "datePublished": "2019-04-29T11:30:00.000Z",
            "dateModified" : "2019-04-29T11:30:00.000Z",
            "image" : {
                "@type": "ImageObject",
                "url": "https:\/\/images.unsplash.com\/photo-1502426899022-660e3522a15a?ixlib=rb-1.2.1\u0026q=80\u0026fm=jpg\u0026crop=entropy\u0026cs=tinysrgb\u0026w=1080\u0026fit=max\u0026ixid=eyJhcHBfaWQiOjE2ODI3fQ",
                "width": 440,
                "height": 295
            },
            "keywords" : [ "c#" ]
            "description" : "With C# 8 on our doorstep, I figure it is a good time to reflect on recent additions to the language that have come before. There are some great improvements you may have missed, some that I really enjoy using, and some I consider have reached canonical usage status that I think are all worth some reflection.\nInitializers have had a few upgrades since the early C# days. But before we look at more recent changes, we will review what came before.",
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https:\/\/blogmigration.csmac.nz"
            }
            "inLanguage" : "en-US",
            "author" : "Mark Clearwater",
            "creator" : "Mark Clearwater",
            "accountablePerson" : "Mark Clearwater",
            "copyrightHolder" : "Mark Clearwater",
            "copyrightYear" : "2019",
            "wordCount" : "1083",
        }
        </script>
        
        
        
    </head>
    <body class="blog">
        <div class="page-area">

            <header class="header-area">
                <h1 class="header-area-title">csMACnz</h1>
            </header>
            <nav class="navigation-area header-bar-parent">
                <div class="header-bar header-bar-blog">
                    <ul class="menu">
                        <li class="menu-item"><a class="menu-item-content" href="https://csmac.nz">Home</a></li>
                        <li class="menu-item"><a class="menu-item-content" href="https://csmac.nz/BaconVaders">Bacon Vaders</a></li>
                        <li class="menu-item"><a class="menu-item-content CurrentButton" href="/">Blog</a></li>
                    </ul>
                </div>
            </nav>

            <div id="content" class="content-area">

<!--Page Content Begins-->

<article>
    <div class="content-box" itemscope itemtype=" https://schema.org/Article">
    
        <span class="post-meta"><time datetime="2019-04-29"  itemprop="datePublished">29 Apr 19</time> on <a href="/tags/c">c#</a></span>
    
        <h1 class="post-title" itemprop="headline">Looking back on C# 6: Initializers</h1>
    
        <section class="post-content"  itemprop="articleBody">
            <img class="post-image" src="https://images.unsplash.com/photo-1502426899022-660e3522a15a?ixlib=rb-1.2.1&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=1080&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjE2ODI3fQ"><p>With C# 8 on our doorstep, I figure it is a good time to reflect on recent additions to the language that have come before. There are some great improvements you may have missed, some that I really enjoy using, and some I consider have reached canonical usage status that I think are all worth some reflection.</p>
<p>Initializers have had a few upgrades since the early C# days. But before we look at more recent changes, we will review what came before.</p>
<p>Initializers or Object Initializers is a name given to code that performs the initial setup of a piece of memory (a struct or an object). Constructors are part of this but the idea goes more towards the holistic setup of the object data for all of the state you care to set up.</p>
<p>Taking a look at C for even more background, we have initializers like so:</p>
<pre><code class="language-c">struct MyType { char s; int n; };

// We can initialize a variable using a curly brace syntax:
MyType x = { 'a', 42 };
</code></pre>
<p>What we see above is that we are initializing our variable <code>x</code> to have its data for <code>.s</code> and <code>.n</code> set to <code>'a'</code> and <code>42</code> respectively. This is initialization. Now using C#, something more familiar:</p>
<pre><code class="language-cs">public class Foo
{
    public string Name { get; set; }
    public int Number { get; set; }
}

// Without using initializers:
Foo myFoo = new Foo();
myFoo.Name = &quot;a&quot;;
myFoo.Number = 42;

// In C# we can initialize in a similar way to C.
// This code compiles to the same instructions as above:
Foo myFoo = new Foo() { Name = &quot;a&quot;, Number = 24 };

// Collections also support initialization
int[] myArray = new int[] { 1, 1, 2, 3, 5, 8 };
</code></pre>
<p>I won&rsquo;t go into how C has advanced its own initializers, that it a different topic. Instead, we will look at how C# has taken this simple initializer above and enhanced in C# 6 on top of this initial syntax in C# 3.</p>
<h3 id="add-extension-support-for-collections">Add Extension support for collections</h3>
<p>When Initializers were implemented (or not long after if my memory deceives me) there was a little magic that made this work. Namely, the code written was simpler and more concise, but the implementation transformed into something more familiar.</p>
<p>The same is true for Collection initialization. If we review the example from above we can see this:</p>
<pre><code class="language-cs">
// Collection initialization
int[] myArray = new int[] { 1, 1, 2, 3, 5, 8 };

// The same code, more verbosely:
int[] myArray = new int[];
myArray.Add(1);
myArray.Add(1);
myArray.Add(2);
myArray.Add(3);
myArray.Add(5);
myArray.Add(8);
</code></pre>
<p>Basically, the syntax is a shorthand for calling <code>Add(</code> on the collection. This allows for more complex situations where <code>Add</code> can take multiple arguments.</p>
<pre><code class="language-cs">var myDict = new Dictionary&lt;int, string&gt;() { { 1, &quot;One&quot; }, { 2, &quot;Two&quot; } };

// This worked the same way as the last example. The same code is:
var myDict = new Dictionary&lt;int, string&gt;();
myDict.Add(1, &quot;One&quot;);
myDict.Add(2, &quot;Two&quot;);
</code></pre>
<p>Again, this is all existing syntax. With C# 6, an ability was added so that instead of needing to implement <code>Add</code> on your type, you could create extension methods as well:</p>
<pre><code>public static void Add(this Dictionary&lt;int, string&gt; dict, Foo value)
{
    dict.Add(value.Number, value.Name);
}

Foo foo1 = new Foo() { Name = &quot;One&quot;, Number = 1 };
Foo foo2 = new Foo() { Name = &quot;Two&quot;, Number = 2 };
var myDict = new Dictionary&lt;int, string&gt;() { foo1, foo2 };
</code></pre>
<p>At this point, the possibilities are endless and fully customizable to create your own Domain-Specific-Language (DSL). You don&rsquo;t even have to use Collections because anything can have an <code>Add</code> overload added via an extension.</p>
<h3 id="index-initializer">Index Initializer</h3>
<p>Dictionary syntax is a bit odd. Add isn&rsquo;t really the right approach. And we already have indexer syntax:</p>
<pre><code class="language-cs">var myDict = new Dictionary&lt;int, string&gt;();
myDict[7] = &quot;seven&quot;;
myDict[9] = &quot;nine&quot;;
myDict[13] = &quot;thirteen;
</code></pre>
<p>Why not extend Initializers to use the indexer as well? They did. C# 6 again.</p>
<pre><code class="language-cs">
var numbers = new Dictionary&lt;int, string&gt; {
    [7] = &quot;seven&quot;,
    [9] = &quot;nine&quot;,
    [13] = &quot;thirteen&quot;
};
</code></pre>
<p>Works as expected, and is the same result as the code above. This works off of the same existing indexer pattern( in a similar manner to the <code>Add</code> usage earlier), so works with any custom indexer on any custom type.</p>
<pre><code>// Using an existing type from Newtonsoft.Json:
var x = new JObject { [&quot;x&quot;] = 3 };
</code></pre>
<h3 id="auto-property-initializers">Auto property initializers</h3>
<p>That is a bunch of consumer side initialization. There was more added behind the scenes in C# 6 as well.</p>
<p>The humble Auto Property:</p>
<pre><code class="language-cs">public int X { get; set; }
</code></pre>
<p>First, we can now give a default initialization:</p>
<pre><code>// This is the same as `X = 4` in the constructor
public int X { get; set; } = 4;    
</code></pre>
<p>And to make this trick even more complete, we have the getter-only property:</p>
<pre><code class="language-cs">public int Y { get; } = 42;    
</code></pre>
<p>As well as the ability to initialize this from a constructor instead:</p>
<pre><code class="language-cs">public class MyFoo
{
    public int Y { get; };    
    
    pubilc MyFoo()
    {
        Y = 42;
    }
}
</code></pre>
<p>Sometimes you may have many constructor overloads, using the property initializer is less code duplication.  Sometimes you may want to have different values for different overloads, then you can initialize in the constructor.</p>
<p>Either way, this gives you true power over you read-only without the verbose equivalent you used to have to write:</p>
<pre><code class="language-cs">// Same code as above in &quot;full&quot;:
public class MyFoo
{
    private readonly int _y;
    public int Y
    {
        get
        {
            return _y;
        }
    };    
    
    pubilc MyFoo()
    {
        _y = 42;
    }
}
</code></pre>
<p>The newer way is much more concise, especially when there are many properties:</p>
<pre><code class="language-cs">// Just imagine how many lines of code this would be the old way!
public class MyFoo
{
    public string X { get; } = &quot;Foo&quot;;    
    public int Y { get; } = 42;    
    public decimal Z { get; } = 54m;
    public object Key { get; } = new object{};
    
    // Other read/write props
    public int Another { get; set; }
    public bool Widgets { get; set; }
}
</code></pre>
<h3 id="wrapup">Wrapup</h3>
<p>Object initialization had a major revamp in C# 6. How many of these do you use regularly? How many do you notice in your own code bases?  These have been around for a while so expect only to see more of it. Do yourself a favour and start using it if you haven&rsquo;t already. Very readability, much fewer keystrokes. Canonical? You betcha!</p>
</section>
        
        <section class="share">
            Share: 
            <a class="icon-twitter" href="https://twitter.com/share?text=Looking%20back%20on%20C%23%206%3a%20Initializers&url=https%3a%2f%2fblogmigration.csmac.nz%2fpost%2flooking-back-on-csharp6-initializers%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <span>Twitter</span>
            </a>
            |
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblogmigration.csmac.nz%2fpost%2flooking-back-on-csharp6-initializers%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <span>Facebook</span>
            </a>
        </section>
    </div>
    <div class="content-box">
        
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = d_id; 
            var disqus_title = 'Looking back on C# 6: Initializers';
            
             
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    </div>
</article>

<!--Page Content Ends-->

            </div><aside class="sidebar-area">

<!--Sidebar Content Begins-->

                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-twitter">Twitter</div>
                    
                    <a class="twitter-timeline" data-lang="en" data-height="510" data-dnt="true" href="https://twitter.com/csMACnz?ref_src=twsrc%5Etfw">Tweets by csMACnz</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-rss">Subscribe</div>
                    
                    <a href="/rssfeeds/" title="csMACnz's Blog">RSS Feeds</a>
                    <a href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Ffeeds.feedburner.com%2FcsmacnzBlog" target="_blank" title="csMACnz&amp;#039;s Blog"><img src="https://s3.feedly.com/feedburner/feedly.png" alt="" style="border:0"/></a>
                    <a href="https://feeds.feedburner.com/csmacnzBlog" target="_blank"><img src="https://feeds.feedburner.com/~fc/csmacnzBlog?bg=fabb45&amp;fg=4B4B4B&amp;anim=1" height="26" width="88" style="border:0" alt="" /></a>
                    <br />
                    <a href="https://www.patreon.com/csMACnz" target="_blank"><img src="/images/patreon.png" /></a>
                    
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-xbox">Gamercard</div>
                    

                    <div>
                        <a href="https://www.exophase.com/xbox/user/csMACnz/"><img width="288px" src="https://card.exophase.com/1/1476805.png"></a>
                        <a href="http://steamcommunity.com/id/csMACnz/" target="_blank"><img src="https://www.steamsignature.com/status/english/76561197994712512.png" alt="" title="csMACnz's Steam Profile" /></a>
                    </div>
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-ads">Advertisement</div>
                    
                    <div>
                        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4517187877737982"
                            crossorigin="anonymous"></script>
                        
                        <ins class="adsbygoogle"
                            style="display:block"
                            data-ad-client="ca-pub-4517187877737982"
                            data-ad-slot="3618449993"
                            data-ad-format="auto"
                            data-full-width-responsive="true"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                    
                </div>

<!--Sidebar Content Ends-->

            </aside>

            <footer class="footer-area">

            <p>
                Designed and Maintained by Mark Clearwater; Last updated August 2021.
                <!-- This used to be something useful, now it is just a hack I left it to make layout easier but also as a fun reminder for me of what it used to be -->
                <br /><a class="footer-link" >¯\_(ツ)_/¯</a>
            </p>

            </footer>
        </div>

<!--body scripts Begins-->

        
        <script src="/js/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <script src="/js/codetoggle.js"></script> 

        
        <script>
            var _gaq = [['_setAccount', g_id], ['_trackPageview']];
            (function (d, t) {
                var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
                g.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
                s.parentNode.insertBefore(g, s);
            }(document, 'script'));
        </script>

        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<!--body scripts Ends-->


<!-------------------------------->
<!--                            -->
<!--  _(\    |@@|               -->
<!-- (__/\__ \--/ __            -->
<!--    \___|----|  |   __      -->
<!--        \ }{ /\ )_ / _\     -->
<!--        /\__/\ \__O (__     -->
<!--       (--/\--)    \__/     -->
<!--       _)(  )(_             -->
<!--      `---''---`            -->
<!--                            -->
<!-- https://github.com/csMACnz -->
<!-------------------------------->

    </body>
</html>
