<!DOCTYPE html>
<html lang="en">
    <head>

        <script>
            if(!/blog\.csmac\.nz/.test(window.location.host)) {
                window.location = "https:\/\/blog.csmac.nz\/post\/experimenting-with-global-json\/";
            }
        </script>

        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name='author' content='Mark Clearwater, csmacnz@csmac.co.nz'>
        <meta name='language' content='EN'>
        <meta name='medium' content='blog'>

    
        <title>Experimenting with global.json - csMACnz&#39;s Blog</title>
        <meta name="description" content="While working on my .Net Core Series I noticed that Visual Studio was adding a global.json file to the root of my project, and liked to put src and test in there. I thought I would investigate what it actually does. I …">
        <meta name='keywords' content='csMACnz, C Sharp, dotnetcore'>

        
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Experimenting with global.json"/>
        <meta property="og:description" content="While working on my .Net Core Series I noticed that Visual Studio was adding a global.json file to the root of my project, and liked to put src and test in there. I thought I would investigate what it actually does. I …"/>
        <meta property="og:site_name" content="csMACnz&#39;s Blog"/>
        <meta property="og:url" content="https://blog.csmac.nz/post/experimenting-with-global-json/"/>
        <meta property="og:image" content="https://csmac.nz/Content/icon/icon.png"/>

        
        <meta name="twitter:card" content="summary"/>
        <meta name="twitter:title" content="Experimenting with global.json"/>
        <meta name="twitter:description" content="While working on my .Net Core Series I noticed that Visual Studio was adding a global.json file to the root of my project, and liked to put src and test in there. I thought I would investigate what it actually does. I …"/>
        <meta name="twitter:image" content="https://csmac.nz/Content/icon/icon.png"/>
        <meta name="twitter:site" content="@csMACnz"/>
        <meta name="twitter:creator" content="@csMACnz"/>
    

        <link rel="apple-touch-icon-precomposed" href="/images/icon/apple-touch-icon-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/icon/apple-touch-icon-72x72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/icon/apple-touch-icon-114x114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/icon/apple-touch-icon-144x144-precomposed.png">
        <link rel="icon" type="image/png" href="/images/icon/icon.png" />
        <link rel='me' type='text/html' href='https://github.com/csMACnz'>

        <script>
            var d_id  = 'csmacnz',
                g_id  = 'UA-18464866-2',
                g_url = 'auto';
        </script>

        <link rel="stylesheet" type="text/css" href="/css/style.css" />
        <link rel="stylesheet" type="text/css" href="/css/blogstyle.css" />

        <link rel="alternate stylesheet" title="dark-code" type="text/css" href="/css/solarized_dark.css" disabled>
        <link rel="stylesheet" title="light-code" type="text/css" href="/css/github-gist.css" disabled>

        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4517187877737982"
        crossorigin="anonymous"></script>

        
        
        <script type="application/ld+json">
        {
            "@context" : "https://schema.org",
            "@type" : "Article",
            "publisher": {
                "@type": "Organization",
                "name": "csMACnz&#x27;s Blog",
                "logo": "https:\/\/blog.csmac.nz\/images\/icon\/apple-touch-icon-144x144-precomposed.png"
            },
            "author": {
                "@type": "Person",
                "name": "Mark Clearwater",
                "image": {
                    "@type": "ImageObject",
                    "url": "//www.gravatar.com/avatar/c97410951ec3738a3fd4a2dfb17a5d9c?d=404&s=250",
                    "width": 440,
                    "height": 295
                },
                "url": "https:\/\/blog.csmac.nz",
                "sameAs": [
                    "https://csmac.nz"
                ]
            },
            "articleSection" : "post",
            "name" : "Experimenting with global.json",
            "headline" : "Experimenting with global.json",
            "url" : "https:\/\/blog.csmac.nz\/post\/experimenting-with-global-json\/",
            "datePublished": "2016-07-21T06:47:17.000Z",
            "dateModified" : "2016-07-21T06:47:17.000Z",
            "keywords" : [ "C Sharp", "dotnetcore" ]
            "description" : "While working on my .Net Core Series I noticed that Visual Studio was adding a global.json file to the root of my project, and liked to put src and test in there. I thought I would investigate what it actually does.\nI noticed that if all my project folders were next to each other it didn\u0026rsquo;t matter. So here is my experiment, and the results.\nglobal.json The default file I end up with in Visual Studio looks roughly like this:",
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https:\/\/blog.csmac.nz"
            }
            "inLanguage" : "en-US",
            "author" : "Mark Clearwater",
            "creator" : "Mark Clearwater",
            "accountablePerson" : "Mark Clearwater",
            "copyrightHolder" : "Mark Clearwater",
            "copyrightYear" : "2016",
            "wordCount" : "478",
        }
        </script>
        
        
        
    </head>
    <body class="blog">
        <div class="page-area">

            <header class="header-area">
                <h1 class="header-area-title">csMACnz</h1>
            </header>
            <nav class="navigation-area header-bar-parent">
                <div class="header-bar header-bar-blog">
                    <ul class="menu">
                        <li class="menu-item"><a class="menu-item-content" href="https://csmac.nz">Home</a></li>
                        <li class="menu-item"><a class="menu-item-content" href="https://csmac.nz/baconvaders">Bacon Vaders</a></li>
                        <li class="menu-item"><a class="menu-item-content CurrentButton" href="/">Blog</a></li>
                    </ul>
                </div>
            </nav>

            <div id="content" class="content-area">

<!--Page Content Begins-->

<article>
    <div class="content-box" itemscope itemtype=" https://schema.org/Article"><span class="post-meta"><time datetime="2016-07-21"  itemprop="datePublished">21 Jul 16</time> in <a href="/categories/software-engineering">Software Engineering</a> on <a href="/tags/c-sharp">C Sharp</a>,  <a href="/tags/dotnetcore">dotnetcore</a></span>
<h1 class="post-title" itemprop="headline">Experimenting with global.json</h1>
    
        <section class="post-content"  itemprop="articleBody">
            <p>While working on my <a href="/dotnetcore-getting-started">.Net Core Series</a> I noticed that Visual Studio was adding a <code>global.json</code> file to the root of my project, and liked to put <code>src</code> and <code>test</code> in there. I thought I would investigate what it actually does.</p>
<p>I noticed that if all my project folders were next to each other it didn&rsquo;t matter. So here is my experiment, and the results.</p>
<h3 id="globaljson">global.json</h3>
<p>The default file I end up with in Visual Studio looks <em>roughly</em> like this:</p>
<pre tabindex="0"><code>{
  &#34;projects&#34;: [ &#34;src&#34;, &#34;test&#34; ],
  &#34;sdk&#34;: {
    &#34;version&#34;: &#34;1.0.0-preview2-003121&#34;
  }
}
</code></pre><h3 id="setup">Setup</h3>
<p>To start with, I created a folder to work in:</p>
<pre tabindex="0"><code>mkdir globaltest
cd globaltest
</code></pre><p>This will be the root folder of my testing today.</p>
<h3 id="side-by-side">Side-by-Side</h3>
<p>For starters, I will create two folders side by side, inside a folder called <code>src</code>.</p>
<pre tabindex="0"><code>mkdir src
cd src
</code></pre><p>First a library:</p>
<pre tabindex="0"><code>mkdir mylib
cd mylib
dotnet new -t lib
dotnet restore
dotnet build
</code></pre><p>Next, a sibling app project:</p>
<pre tabindex="0"><code>cd ../
mkdir app1
cd app1
dotnet new
</code></pre><p>And to make sure they are linked, I add a project reference to the app&rsquo;s <code>project.json</code> file:</p>
<pre tabindex="0"><code>&#34;mylib&#34;: {
    &#34;target&#34;: &#34;Project&#34;,
    &#34;version&#34;: &#34;*&#34;
}
</code></pre><p>And test that it works</p>
<pre tabindex="0"><code>dotnet restore
dotnet build
</code></pre><p>And it does. Sibling project folders without a <code>global.json</code> file work successfully with project references.</p>
<h3 id="cousin-projects">Cousin projects</h3>
<p>This time, I want to see what happens when there are two projects with an extra layer up between them. First back up to our root:</p>
<pre tabindex="0"><code>cd ../../
</code></pre><p>Now beside the original <code>src</code> folder we will create an <code>other</code> folder, and Inside it, a second app:</p>
<pre tabindex="0"><code>mkdir other
cd other
mkdir app2
cd app2
dotnet new
</code></pre><p>Again we add a project reference to the original lib project that is inside the <code>src</code> folder:</p>
<p>project.json</p>
<pre tabindex="0"><code>&#34;mylib&#34;: {
    &#34;target&#34;: &#34;Project&#34;,
    &#34;version&#34;: &#34;*&#34;
}
</code></pre><p>So now we have the following:</p>
<pre tabindex="0"><code>globaltest
|-- src
|    |-- mylib
|    |    |-- Library.cs
|    |    +-- project.json
|    +-- app1
|         |-- Program.cs
|         +-- project.json
+-- other
     +-- app2
          |-- Program.cs
          +-- project.json
</code></pre><p>For the moment of truth, we test if we can do a restore from app2:</p>
<pre tabindex="0"><code>dotnet restore
</code></pre><p>Fail.</p>
<pre tabindex="0"><code>error: Unable to resolve &#39;mylib&#39; for &#39;.NETCoreApp,Version=v1.0&#39;.
</code></pre><p>Looks like we might need the <code>global.json</code> file for just this situation:</p>
<pre tabindex="0"><code>cd ../../
touch global.json
</code></pre><p>lets put the following in there:</p>
<pre tabindex="0"><code>{
  &#34;projects&#34;: [ &#34;src&#34;, &#34;other&#34; ],
  &#34;sdk&#34;: {
    &#34;version&#34;: &#34;1.0.0-preview2-003121&#34;
  }
}
</code></pre><p>And one more time now:</p>
<pre tabindex="0"><code>cd other/app2
dotnet restore
dotnet build
</code></pre><p>Success!</p>
<h3 id="conclusion">Conclusion</h3>
<p>So why do when do we need a <code>global.json</code>? When our projects are spread out across different levels at different nesting. When can we do without? When the projects that need to reference each other are in folders right next to each other.</p>
<p>There are more complex scenarios I could have tried, but I&rsquo;m happy to stop here. But please, keep testing to look for other cases that interest you, by all means.</p>
</section>
        
        <section class="share">
            Share: 
            <a class="icon-twitter" href="https://twitter.com/share?text=Experimenting%20with%20global.json&url=https%3a%2f%2fblog.csmac.nz%2fpost%2fexperimenting-with-global-json%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <span>Twitter</span>
            </a>
            |
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.csmac.nz%2fpost%2fexperimenting-with-global-json%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <span>Facebook</span>
            </a>
        </section>
    </div>
    <div class="content-box">
        
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = d_id; 
            var disqus_title = 'Experimenting with global.json';
            
             
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    </div>
</article>

<!--Page Content Ends-->

            </div><aside class="sidebar-area">

<!--Sidebar Content Begins-->

                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-mastodon">Mastodon</div>
                    
                    
                    <iframe allowfullscreen sandbox="allow-top-navigation allow-scripts" width="280" height="400" src="https://maplefeed.bihlink.com/apiv2/feed?userurl=https%3A%2F%2Fmastodon.nz%2F%2Fusers%2Fcsmacnz&theme=modern-light&size=80&header=true&replies=false&boosts=false"></iframe>
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-rss">Subscribe</div>
                    
                    <a href="/rssfeeds/" title="csMACnz's Blog">RSS Feeds</a>
                    <a href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Ffeeds.feedburner.com%2FcsmacnzBlog" target="_blank" title="csMACnz&amp;#039;s Blog"><img src="https://s3.feedly.com/feedburner/feedly.png" alt="" style="border:0"/></a>
                    <br />
                    <a href="https://www.patreon.com/csMACnz" target="_blank"><img src="/images/patreon.png" /></a>
                    
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-xbox">Gamercard</div>
                    

                    <div>
                        <a href="https://www.exophase.com/xbox/user/csMACnz/"><img width="288px" src="https://card.exophase.com/1/1476805.png"></a>
                        <a href="http://steamcommunity.com/id/csMACnz/" target="_blank"><img src="https://www.steamsignature.com/status/english/76561197994712512.png" alt="" title="csMACnz's Steam Profile" /></a>
                    </div>
                    
                </div>


                <div class="header-bar-parent sidebar-item">
                    <div class="header-bar header-bar-ads">Advertisement</div>
                    
                    <div>
                        
                        <ins class="adsbygoogle"
                            style="display:block"
                            data-ad-client="ca-pub-4517187877737982"
                            data-ad-slot="3618449993"
                            data-ad-format="auto"
                            data-full-width-responsive="true"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                    
                </div>

<!--Sidebar Content Ends-->

            </aside>

            <footer class="footer-area">

            <p>
                Designed and Maintained by Mark Clearwater; Last updated August 2021.
                <!-- This used to be something useful, now it is just a hack I left it to make layout easier but also as a fun reminder for me of what it used to be -->
                <br /><a class="footer-link" >¯\_(ツ)_/¯</a>
            </p>

            </footer>
        </div>

<!--body scripts Begins-->

        
        <script src="/js/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <script src="/js/codetoggle.js"></script> 

        
        <script src="/js/htmx.min.js"></script>

        
        <script>
            var _gaq = [['_setAccount', g_id], ['_trackPageview']];
            (function (d, t) {
                var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
                g.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
                s.parentNode.insertBefore(g, s);
            }(document, 'script'));
        </script>

        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<!--body scripts Ends-->


<!-------------------------------->
<!--                            -->
<!--  _(\    |@@|               -->
<!-- (__/\__ \--/ __            -->
<!--    \___|----|  |   __      -->
<!--        \ }{ /\ )_ / _\     -->
<!--        /\__/\ \__O (__     -->
<!--       (--/\--)    \__/     -->
<!--       _)(  )(_             -->
<!--      `---''---`            -->
<!--                            -->
<!-- https://github.com/csMACnz -->
<!-------------------------------->

    </body>
</html>
